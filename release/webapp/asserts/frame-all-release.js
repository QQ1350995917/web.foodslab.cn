/*! foodslab-back-end 2016-09-07 */
"use strict";function resetView(){var a=document.getElementById(MAIN_TITLE_ID);a.innerHTML=null;var b=document.getElementById(MAIN_CONTENT_ID);b.innerHTML=null}function asyncRequestByGet(a,b,c,d){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&b(e.responseText)},e.timeout=5e3,e.ontimeout=d,e.open("GET",a,!0),e.send(null)}function asyncRequestByPost(a,b,c,d,e){var f=new XMLHttpRequest;f.onreadystatechange=function(){4==f.readyState&&200==f.status?b(f.responseText):c()},f.timeout=5e3,f.ontimeout=d,f.open("POST",a,!0),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(encodeURI(e))}function checkResponsDataFormat(a){return!0}function applicationOnload(){requestMenus("")}function onRequestError(){}function onRequestTimeout(){}function requestMenus(a){requestMeta(),asyncRequestByGet(menuUrl,onMenuDataCallback,onRequestError,onRequestTimeout)}function requestMeta(){asyncRequestByGet(BASE_PATH+"/meta",onMetaCallback,onRequestError,onRequestTimeout)}function onMetaCallback(a){var b=JSON.parse(a);UNITS=b.data}function onMenuDataCallback(a){for(var b=JSON.parse(a),c=(b.code,b.message,b.data),d=new Array,e=new Array,f=0;f<c.length;f++){var g=c[f];1==g.status&&(g.menuLabel=g.label,APP_CONST_MENU.push(g)),"51bf4162-5270-11e6-8311-1cae145b8cab"==g.positionId?d.push(new TabItem(g.menuId,g.label,g.method,"horizontalIndexNormal","horizontalIndexSelect","horizontalIndexNormal")):"8e2e3fc7-1968-4f1b-bd4c-07794c5855b5"==g.positionId&&e.push(new TabItem(g.menuId,g.label,g.method,"verticalNormal","verticalSelected","verticalNormal","verticalNormalArrow","verticalSelectedArrow","verticalNormalArrow"))}initHorizontalTabHostView(document.getElementById("header_menu"),d,100,!0),initVerticalTabHostView(document.getElementById("leftMenu"),e,!0)}function onFrameMenuItemClick(a){"manager"==a?(resetView(),managerIndex()):"product"==a?(resetView(),productSeries()):"recommend"==a?recommend():"link"==a?link():"poster"==a?posterInit():"skin"==a?initSkinView():(console.log(a),console.log("点击判断值超出范围"))}function link(){var a=BASE_PATH+"/link";asyncRequestByGet(a,function(a){onLinkDataCallback(a)},onRequestError(),onRequestTimeout())}function createLink(a,b,c,d){var e=BASE_PATH+"/link/create?pid="+b+"&label="+c+"&href="+d;asyncRequestByGet(e,function(c){onCreateLinkDataCallback(b,a,c)},onRequestError(),onRequestTimeout())}function updateLink(a,b,c,d,e,f,g){var h=void 0;h=void 0==g?BASE_PATH+"/link/update?linkId="+c+"&pid="+d+"&label="+e+"&href="+f+"&status=1":BASE_PATH+"/link/update?linkId="+c+"&pid="+d+"&label="+e+"&href="+f+"&status=-1",void 0==h?(new Toast).show("信息缺失,无法提交"):asyncRequestByGet(h,function(c){onUpdateLinkDataCallback(a,b,c,g)},onRequestError(),onRequestTimeout())}function onLinkDataCallback(a){var b=checkResponsDataFormat(a);if(b){var c=JSON.parse(a);initLinkRootView(c.data)}}function onCreateLinkDataCallback(a,b,c){var d=checkResponsDataFormat(c);if(d){var e=JSON.parse(c);200==e.code?((new Toast).show("创建成功"),b.removeChild(b.lastChild),b.style.height=b.clientHeight+50+"px",b.parentNode.style.height=b.parentNode.clientHeight+50+"px",createLinkItemView(a,b,e.data),createLinkItemView(a,b,void 0)):(new Toast).show("创建失败")}}function onUpdateLinkDataCallback(a,b,c,d){var e=checkResponsDataFormat(c);if(e){var f=JSON.parse(c);200==f.code?((new Toast).show("更新成功"),d&&(a.removeChild(b),a.style.height=a.clientHeight-50+"px",a.parentNode.style.height=a.parentNode.clientHeight-50+"px")):(new Toast).show("更新失败")}}function initLinkRootView(a){resetView();var b=document.getElementById(MAIN_TITLE_ID),c=document.getElementById(MAIN_CONTENT_ID),d=document.createElement("div");d.innerHTML="链接管理",d.className="horizontalSelected",d.style.width="100%",b.appendChild(d);for(var e=void 0==a?0:a.length,f=0;f<e;f++){var g=a[f],h=document.createElement("div");h.className="SS_IC",h.style.height="60px",h.style.width="100%";var i=document.createElement("div");i.className="SS_IC",i.style.height="40px",i.style.width="122px",i.style.borderLeftWidth="0px";var j=document.createElement("hr");j.className="SS_IC_HL",j.style.marginTop="20px",i.appendChild(j);var k=document.createElement("div");k.className="SS_IC_LABEL",k.style.borderLeftWidth="1px",k.style.marginTop="5px",k.innerHTML=g.label,k.style.cursor="default",i.appendChild(k);var l=document.createElement("hr");l.className="SS_IC_HL",l.style.marginTop="20px",i.appendChild(l),h.appendChild(i);var m=document.createElement("div");m.className="SS_IC",m.style.width="900px";for(var n=void 0==g.children?0:g.children.length,o=0;o<n;o++){var p=g.children[o];createLinkItemView(g.linkId,m,p)}createLinkItemView(g.linkId,m,void 0),h.appendChild(m),m.style.height=40*(n+1)+"px",m.parentNode.style.height=40*(n+1)+20+"px",c.appendChild(h)}}function createLinkItemView(a,b,c){var d=document.createElement("div");d.className="SS_IC",d.style.width="100%",d.style.height="30px",d.style.marginBottom="10px",d.style.borderLeftWidth="0px";var e=document.createElement("hr");e.className="SS_IC_HL",e.style.marginTop="20px",d.appendChild(e);var f=document.createElement("div");if(f.className="SS_IC",f.style.width="870px",f.style.height="30px",f.style.borderLeftWidth="0px",d.appendChild(f),void 0==c){var g=document.createElement("div");g.className="SS_IC_LABEL",g.style.width="870px",g.style.height="30px",g.style.marginTop="5px",g.style.borderLeftWidth="1px",g.innerHTML="+",g.onclick=function(){onAddNewLinkViewClick(b,a,f,void 0)},f.appendChild(g),d.appendChild(f)}else{var h=document.createElement("div");h.className="SS_IC_LABEL",h.style.width="100px",h.style.height="30px",h.style.marginTop="5px",h.style.borderLeftWidth="1px",h.innerHTML=c.label,h.ondblclick=function(){onAddNewLinkViewClick(b,a,f,c)},f.appendChild(h);var i=document.createElement("hr");i.className="SS_IC_HL",i.style.marginTop="20px",f.appendChild(i);var j=document.createElement("div");j.className="SS_IC_LABEL",j.style.width="736px",j.style.height="30px",j.style.marginTop="5px",j.style.borderLeftWidth="1px",j.style.textAlign="left",j.style.paddingLeft="10px",j.innerHTML=c.href,j.ondblclick=function(){onAddNewLinkViewClick(b,a,f,c)},f.appendChild(j)}b.appendChild(d)}function onAddNewLinkViewClick(a,b,c,d){c.innerHTML=null;var e=document.createElement("input");e.className="SS_IC_LABEL",e.style.width="100px",e.style.height="30px",e.style.marginTop="5px",e.style.borderLeftWidth="1px",c.appendChild(e),void 0!=d?e.value=d.label:e.focus();var f=document.createElement("hr");f.className="SS_IC_HL",f.style.marginTop="20px",c.appendChild(f);var g=document.createElement("input");g.className="SS_IC_LABEL",void 0==d?g.style.width="602px":g.style.width="532px",g.style.height="30px",g.style.marginTop="5px",g.style.borderLeftWidth="1px",c.appendChild(g),void 0!=d&&(g.value=d.href,g.focus());var h=document.createElement("div");h.className="B_B_D",h.style.marginTop="5px",h.style.height="33px",h.innerHTML="取消",h.onclick=function(){if(c.innerHTML=null,void 0==d){var e=document.createElement("div");e.className="SS_IC_LABEL",e.style.width="870px",e.style.height="30px",e.style.marginTop="5px",e.style.borderLeftWidth="1px",e.innerHTML="+",e.onclick=function(){onAddNewLinkViewClick(a,b,c,d)},c.appendChild(e)}else{var f=document.createElement("div");f.className="SS_IC_LABEL",f.style.width="100px",f.style.height="30px",f.style.marginTop="5px",f.style.borderLeftWidth="1px",f.innerHTML=d.label,f.ondblclick=function(){onAddNewLinkViewClick(a,b,c,d)},c.appendChild(f);var g=document.createElement("hr");g.className="SS_IC_HL",g.style.marginTop="20px",c.appendChild(g);var h=document.createElement("div");h.className="SS_IC_LABEL",h.style.width="736px",h.style.height="30px",h.style.marginTop="5px",h.style.borderLeftWidth="1px",h.style.textAlign="left",h.style.paddingLeft="10px",h.innerHTML=d.href,h.ondblclick=function(){onAddNewLinkViewClick(a,b,c,d)},c.appendChild(h)}},c.appendChild(h);var i=document.createElement("div");if(i.className="B_B_D",i.style.marginTop="5px",i.style.height="33px",i.innerHTML="保存",i.onclick=function(){if(void 0==g.value||null==g.value||""==g.value.trim()||void 0==e.value||null==e.value||""==e.value.trim())(new Toast).show("请输入完整信息");else if(void 0==d)createLink(a,b,e.value,g.value);else{updateLink(a,c.parentNode,d.linkId,d.pid,e.value,g.value,void 0),c.innerHTML=null;var f=document.createElement("div");f.className="SS_IC_LABEL",f.style.width="100px",f.style.height="30px",f.style.marginTop="5px",f.style.borderLeftWidth="1px",f.innerHTML=e.value,f.ondblclick=function(){onAddNewLinkViewClick(a,b,c,d)},c.appendChild(f);var h=document.createElement("hr");h.className="SS_IC_HL",h.style.marginTop="20px",c.appendChild(h);var i=document.createElement("div");i.className="SS_IC_LABEL",i.style.width="736px",i.style.height="30px",i.style.marginTop="5px",i.style.borderLeftWidth="1px",i.style.textAlign="left",i.style.paddingLeft="10px",i.innerHTML=g.value,i.ondblclick=function(){onAddNewLinkViewClick(a,b,c,d)},c.appendChild(i)}},c.appendChild(i),void 0!=d){var j=document.createElement("div");j.className="B_B_D",j.style.marginTop="5px",j.style.height="33px",j.innerHTML="删除",j.onclick=function(){updateLink(a,c.parentNode,d.linkId,d.pid,d.label,d.href,-1)},c.appendChild(j)}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function managerIndex(){var a=BASE_PATH+"/manager";asyncRequestByGet(a,onIndexDataCallback,onRequestError(),onRequestTimeout())}function onIndexDataCallback(a){var b=checkResponsDataFormat(a);if(b){var c=new Array(new TabItem("1","管理员信息","","horizontalNormal","horizontalSelected","horizontalSelected"));initHorizontalTabHostView(document.getElementById(MAIN_TITLE_ID),c);for(var d=JSON.parse(a),e=d.data,f=new Array,g=0;g<e.length;g++){var h=e[g];f.push(new ManagerEntity(h.managerId,h.username,h.level,h.queue,h.status,h.pId,h.managerMenuEntitiesMapping))}var i=document.createElement("div");i.id="managerContainer",i.className="managerContainer",document.getElementById(MAIN_CONTENT_ID).appendChild(i),initManagerList(i,f)}}function check(a){var b=BASE_PATH+"/manager/check";asyncRequestByPost(b,function(a){var b=JSON.parse(a),c=b.data;"true"==c?(new Toast).show("用户名已经存在"):(new Toast).show("用户名可用")},onRequestError,onRequestTimeout,"username="+a)}function create(a,b,c){for(var d=BASE_PATH+"/manager/create",e="",f=0;f<c.length;f++){var g=c[f];e=e+","+g.menuId+":"+g.label}var h="pid=xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx&username="+a+"&password="+b+"&menus="+e;asyncRequestByPost(d,function(a){var b=JSON.parse(a),c=b.data;"false"==c?(new Toast).show("创建失败"):(new Toast).show("创建成功")},onRequestError,onRequestTimeout,h)}function update(a,b,c,d){for(var e=BASE_PATH+"/manager/update",f="",g=0;g<d.length;g++){var h=d[g];f=f+","+h.menuId+":"+h.menuLabel}var i="managerId="+a+"&username="+b+"&password="+c+"&menus="+f;asyncRequestByPost(e,function(a){var b=JSON.parse(a),c=b.data;"false"==c?(new Toast).show("更新失败"):(new Toast).show("更新成功")},onRequestError,onRequestTimeout,i)}function initManagerList(a,b){a.innerHTML=null;var c=b.length;a.style.height=240*c+"px";for(var d=0;d<c;d++)a.appendChild(createManagerItemView(b[d]));var e=document.createElement("button");e.className="managerItem_save",e.innerHTML="添加管理员",a.appendChild(e),e.onclick=function(){b.push(new ManagerEntity(APP_CONST_CLIENT_ID,"default",1,1,"",new Array)),initManagerList(a,b)}}function createManagerItemView(a){var b=document.createElement("div");b.className="managerItemContainer";var c=document.createElement("div");c.className="managerItem_rowLevel1";var d=document.createElement("hr");d.className="managerItem_connectLineHLevel1",c.appendChild(d);var e=document.createElement("div");e.className="managerItem_managerName",e.innerHTML=a.username,c.appendChild(initWidgetEditable1(e,a)),b.appendChild(c);var f=document.createElement("hr");f.className="managerItem_connectLineV",b.appendChild(f);var g=document.createElement("div");g.className="managerItem_rowLevel2";var h=document.createElement("hr");h.className="managerItem_connectLineHLevel2",g.appendChild(h);var i=document.createElement("div");i.className="managerItem_label",i.innerHTML="密码:",g.appendChild(i);var j=document.createElement("div");j.className="managerItem_managerEditor",g.appendChild(initWidgetEditable2(j,a,"password1")),b.appendChild(g);var k=document.createElement("div");k.className="managerItem_rowLevel2";var l=document.createElement("hr");l.className="managerItem_connectLineHLevel2",k.appendChild(l);var m=document.createElement("div");m.className="managerItem_label",m.innerHTML="确认:",k.appendChild(m);var n=document.createElement("div");if(n.className="managerItem_managerEditor",k.appendChild(initWidgetEditable2(n,a,"password2")),b.appendChild(k),1==a.level){var o=document.createElement("div");o.className="managerItem_rowLevel2";var p=document.createElement("hr");p.className="managerItem_connectLineHLevel2",o.appendChild(p);var q=document.createElement("div");q.className="managerItem_label",q.innerHTML="权限:",o.appendChild(q);var r=document.createElement("div");r.className="managerItem_managerEditor",r.style.width="90%";for(var s=void 0==a.managerMenuEntitiesMapping?new Array:a.managerMenuEntitiesMapping,t=new Array,u=0;u<APP_CONST_MENU.length;u++){for(var v=APP_CONST_MENU[u],w=void 0,x=0;x<s.length;x++){var y=s[x];if(v.menuId==y.menuId){w=1;break}}w||t.push(v)}initWidgetSelector(r,s,t),o.appendChild(r),b.appendChild(o)}var z=document.createElement("div");z.className="managerItem_rowLevel2";var A=document.createElement("hr");A.className="managerItem_connectLineHLevel2",z.appendChild(A);var B=document.createElement("button");return B.className="managerItem_save",B.innerHTML="确认保存",B.onclick=function(){var b=r.menus;a.managerId==APP_CONST_CLIENT_ID?create(e.innerText,j.password,b):update(a.managerId,e.innerText,j.password,b)},z.appendChild(B),b.appendChild(z),b}function initWidgetEditable1(a,b){if(a.innerHTML=null,void 0==b.currentUserNameStatus||"normalDisplay"==b.currentUserNameStatus){var c=document.createElement("div");c.className="widget_editable_block",c.innerHTML=b.username,a.appendChild(c),c.addEventListener("dblclick",function(){b.currentUserNameStatus="selectDisplay",1==b.level&&(a.style.width="300px"),initWidgetEditable1(a,b)})}else"selectDisplay"==b.currentUserNameStatus&&!function(){var c=document.createElement("input");if(c.className="widget_editable_block",c.type="text",c.style.fontSize="1rem",c.value=b.username,a.appendChild(c),1==b.level&&b.managerId!=APP_CONST_CLIENT_ID){var d=document.createElement("div");d.type="button",d.className="widget_editable_button",d.innerHTML="禁用";var e=document.createElement("div");e.type="button",e.className="widget_editable_button",e.innerHTML="删除",a.appendChild(d),a.appendChild(e)}c.addEventListener("blur",function(){a.style.width="200px",b.currentUserNameStatus="normalDisplay",b.username=c.value,initWidgetEditable1(a,b),check(b.username)})}();return a}function initWidgetEditable2(a,b,c){if(a.innerHTML=null,void 0==b.currentPassword1Status||"normalDisplay"==b.currentPassword1Status){var d=document.createElement("div");d.className="widget_editable_block",d.id=c,void 0!=b.passowrd1&&""!=b.passowrd1&&(d.value=b.passowrd1,d.innerText="......"),a.appendChild(d),d.addEventListener("dblclick",function(){b.currentPassword1Status="selectDisplay",initWidgetEditable2(a,b)})}else"selectDisplay"==b.currentPassword1Status&&!function(){var d=document.createElement("input");d.innerHTML=null,d.id=c,d.className="widget_editable_block",d.type="password",d.style.fontSize="1rem",a.appendChild(d),d.addEventListener("blur",function(){b.currentPassword1Status="normalDisplay",b.passowrd1=d.value,a.password=d.value,initWidgetEditable2(a,b)})}();return a}function initWidgetSelector(a,b,c){a.innerHTML=null;var d=b.length;a.menus=b;for(var e=function(e){var f=b[e],g=document.createElement("div");g.className="selector_selected",g.innerHTML=f.menuLabel;var h=document.createElement("div");h.innerHTML="X",h.className="selector_selected_delete",g.appendChild(h),g.onmousemove=function(){h.style.visibility="visible",h.onclick=function(){var g=b.slice(0,e),h=b.slice(e+1,d);b=g.concat(h),c.push(f),initWidgetSelector(a,b,c)}},g.onmouseout=function(){h.style.visibility="hidden"},a.appendChild(g)},f=0;f<d;f++)e(f);var g=c.length;g>0&&!function(){var d=document.createElement("select");d.className="selector_selected",d.options.add(new Option("请选择","请选择")),a.appendChild(d);for(var e=0;e<g;e++){var f=new Option(c[e].label,c[e].menuId);d.options.add(f)}d.onchange=function(){if(d.selectedIndex>0){var e=c[d.selectedIndex-1],f=c.slice(0,d.selectedIndex-1),h=c.slice(d.selectedIndex,g);c=f.concat(h),b.push(new ManagerMenuEntity("",e.menuId,e.label)),initWidgetSelector(a,b,c)}}}()}function posterInit(){var a=BASE_PATH+"/poster/";asyncRequestByGet(a,function(a){onPosterDataCallback(a)},onRequestError(),onRequestTimeout())}function updatePoster(a,b,c,d,e,f){var g=BASE_PATH+"/poster/update?posterId="+a+"&status="+b+"&clickable="+c+"&href="+d+"&start="+e+"&end="+f;asyncRequestByGet(g,function(a){onUpdateDataCallback(a)},onRequestError(),onRequestTimeout())}function onPosterDataCallback(a){var b=checkResponsDataFormat(a);if(b){var c=JSON.parse(a);initPosterView(c.data)}}function onUpdateDataCallback(a){var b=checkResponsDataFormat(a);if(b){var c=JSON.parse(a);200==c.code?(new Toast).show("保存成功"):(new Toast).show("保存失败")}}function initPosterView(a){resetView();var b=document.getElementById(MAIN_TITLE_ID),c=document.getElementById(MAIN_CONTENT_ID),d=document.createElement("div");d.innerHTML="海报管理",d.className="horizontalSelected",d.style.width="100%",b.appendChild(d);var e=document.createElement("div");e.style.width="100%",e.style.height="30px";var f=document.createElement("input");f.setAttribute("type","checkbox"),f.className="formatDisplayCheckBox",f.style.marginLeft="10px",f.style.cursor="pointer",0==a.status?f.checked=!1:1==a.status&&(f.checked=!0),e.appendChild(f);var g=document.createElement("div");g.style["float"]="left",g.style.height="28px",g.style.lineHeight="30px",g.style.fontSize="14px",g.innerHTML="是否显示&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;从",e.appendChild(g);var h=document.createElement("input");h.className="posterItemContainer",h.readOnly=!0,h.style.paddingLeft="10px",h.style.margin="0px",h.style.width="245px",h.style.height="28px",h.style.lineHeight="30px",h.style.fontSize="14px",h.style.borderWidth="1px",new Pikaday({field:h,firstDay:1,minDate:new Date("2015-01-01"),maxDate:new Date("2020-12-31"),yearRange:[2015,2020]}),void 0!=a.start&&(h.value=a.start),e.appendChild(h);var i=document.createElement("div");i.style["float"]="left",i.style.width="15px",i.style.height="28px",i.style.lineHeight="30px",i.style.fontSize="14px",i.innerHTML="到",e.appendChild(i);var j=document.createElement("input");j.className="posterItemContainer",j.readOnly=!0,j.style.paddingLeft="10px",j.style.margin="0px",j.style.width="245px",j.style.height="28px",j.style.lineHeight="30px",j.style.fontSize="14px",j.style.borderWidth="1px",new Pikaday({field:j,firstDay:1,minDate:new Date("2015-01-01"),maxDate:new Date("2020-12-31"),yearRange:[2015,2020]}),void 0!=a.end&&(j.value=a.end),e.appendChild(j);var k=document.createElement("div");k.style["float"]="left",k.style.width="60px",k.style.height="28px",k.style.lineHeight="30px",k.style.fontSize="14px",k.innerHTML="显示海报",e.appendChild(k);var l=document.createElement("div");l.className="B_B_D",l.style["float"]="right",l.style.marginRight="15px",l.innerHTML="保存",l.onclick=function(){(f.checked?1:0==a.status&&a.start==h.value&&a.end==j.value)?(new Toast).show("无需保存"):updatePoster(a.posterId,f.checked?1:0,0,"",h.value,j.value)},e.appendChild(l),c.appendChild(e);var m=document.createElement("div");m.style.width="100%";for(var n=void 0==a.children?0:a.children.length,o=0;o<n;o++){if(o%2==0){var p=document.createElement("div");p.className="clearFloat",m.appendChild(p)}createPosterItemWidget(m,a.children[o])}createAddNewPosterWidget(m,a),c.appendChild(m)}function createPosterItemWidget(a,b){var c=document.createElement("div");c.className="posterItemContainer";var d=document.createElement("img");d.className="posterSnap",c.appendChild(d);var e=document.createElement("div");e.className="posterButtonContainer";var f=document.createElement("div");f.className="posterButton",f.innerHTML="显示",e.appendChild(f);var g=document.createElement("hr");g.className="posterButtonHL",e.appendChild(g);var h=document.createElement("div");h.className="posterButton",h.innerHTML="可点击",e.appendChild(h);var i=document.createElement("hr");i.className="posterButtonHL",e.appendChild(i);var j=document.createElement("div");j.className="posterButton",j.innerHTML="删除",e.appendChild(j);var k=document.createElement("hr");k.className="posterButtonHL",e.appendChild(k);var l=document.createElement("div");l.className="posterButton",l.innerHTML="编辑",l.onclick=function(){posterEditor(b,!1)},e.appendChild(l),c.appendChild(e),a.appendChild(c)}function createAddNewPosterWidget(a,b){var c=document.createElement("div");c.className="posterItemContainer",c.style.backgroundColor="#169BD5",c.style.color="#FFFFFF",c.style.fontSize="200px",c.style.height="323px",c.style.lineHeight="323px",c.style.cursor="pointer",c.innerHTML="+",c.onclick=function(){posterEditor(b,!0)},a.appendChild(c)}function posterEditor(a,b){initPosterEditorView(a,b)}function createPoster(a,b,c,d){var e=BASE_PATH+"/poster/create?pid="+a+"&status="+b+"&clickable="+c+"&href="+d;asyncRequestByGet(e,function(a){onCreateDataCallback(a)},onRequestError(),onRequestTimeout())}function onCreateDataCallback(a){var b=checkResponsDataFormat(a);if(b){var c=JSON.parse(a);200==c.code?((new Toast).show("保存成功"),poster()):(new Toast).show("保存失败")}}function initPosterEditorView(a,b){resetView();var c=document.getElementById(MAIN_TITLE_ID),d=document.getElementById(MAIN_CONTENT_ID),e=document.createElement("div");e.innerHTML="海报编辑",e.className="horizontalSelected",e.style.width="100%",e.style.cursor="pointer",c.appendChild(e),c.style.cursor="pointer",c.onclick=function(){a(),c.onclick=null,c.style.cursor="default"};var f=document.createElement("div");f.className="editorBlockView",f.style.height="440px",f.style.borderWidth="1px",f.style.cursor="pointer",d.appendChild(f);var g=document.createElement("div");g.className="editorBlockView";var h=document.createElement("input");h.setAttribute("type","checkbox"),h.className="formatDisplayCheckBox",b||(0==a.status?h.checked=!1:1==a.status&&(h.checked=!0)),g.appendChild(h);var i=document.createElement("div");i.style["float"]="left",i.style.height="28px",i.style.lineHeight="28px",i.style.fontSize="14px",i.innerHTML="是否显示",g.appendChild(i),d.appendChild(g);var j=document.createElement("div");j.className="editorBlockView";var k=document.createElement("input");k.setAttribute("type","checkbox"),k.className="formatDisplayCheckBox",b||(0==a.status?k.checked=!1:1==a.status&&(k.checked=!0)),j.appendChild(k);var l=document.createElement("div");l.style["float"]="left",l.style.height="28px",l.style.lineHeight="28px",l.style.fontSize="14px",l.innerHTML="是否可点击",j.appendChild(l),d.appendChild(j);var m=document.createElement("div");m.style["float"]="left",m.style.height="28px",m.style.lineHeight="28px",m.style.fontSize="14px",m.style.marginLeft="20px",m.innerHTML="链接地址",j.appendChild(m);var n=document.createElement("input");n.className="SS_IC_LABEL",n.style.width="886px",n.style.height="28px",n.style.borderLeftWidth="1px",n.style.marginLeft="10px",b||(n.value=a.href),j.appendChild(n),d.appendChild(j);var o=document.createElement("div");o.className="editorBlockView",o.style.marginTop="15px";var p=document.createElement("div");p.className="B_B_D",p.style.marginLeft="0px",p.style.width="532px",p.innerHTML="取消",p.onclick=function(){posterInit(),c.onclick=null,c.style.cursor="default"},o.appendChild(p);var q=document.createElement("hr");q.className="posterButtonHL",o.appendChild(q);var r=document.createElement("div");r.className="B_B_D",r.style.marginLeft="0px",r.style.width="532px",b?(r.innerHTML="提交",r.onclick=function(){createPoster(a.posterId,h.checked?1:0,k.checked?1:0,n.value)}):(r.innerHTML="保存",r.onclick=function(){updatePoster(a.posterId,h.checked?1:0,k.checked?1:0,n.value)}),o.appendChild(r),d.appendChild(o)}function productSeries(){var a=BASE_PATH+"/product";asyncRequestByGet(a,onProductDataCallBack,onRequestError(),onRequestTimeout())}function createSeries(a,b){var c=BASE_PATH+"/product/createSeries?label="+b;asyncRequestByGet(c,function(b){onSeriesCreateDataCallback(a,b)},onRequestError(),onRequestTimeout())}function renameSeries(a,b){var c=BASE_PATH+"/product/updateSeries?label="+b+"&seriesId="+a+"&status=1";asyncRequestByGet(c,onSeriesRenameDataCallback,onRequestError(),onRequestTimeout())}function blockSeries(){}function deleteSeries(a,b,c,d){var e=BASE_PATH+"/product/updateSeries?label="+d+"&seriesId="+c+"&status=-1";asyncRequestByGet(e,function(c){onSeriesDeleteDataCallback(a,b,c)},onRequestError(),onRequestTimeout())}function onProductDataCallBack(a){var b=checkResponsDataFormat(a);if(b){var c=JSON.parse(a);GLOBAL_PRODUCT_ENTITIES=c.data,initProductView(GLOBAL_PRODUCT_ENTITIES)}}function onSeriesCreateDataCallback(a,b){var c=checkResponsDataFormat(b);if(c){var d=JSON.parse(b);a.removeChild(a.childNodes[a.childNodes.length-1]),a.removeChild(a.childNodes[a.childNodes.length-1]),initProductItemView(a,d.data),addNewSeries(a)}}function onSeriesRenameDataCallback(a){var b=checkResponsDataFormat(a);if(b){var c=JSON.parse(a);200==c.code?(new Toast).show("更新成功"):(new Toast).show("更新失败")}}function onSeriesDeleteDataCallback(a,b,c){var d=checkResponsDataFormat(c);if(d){var e=JSON.parse(c);200==e.code?(a.removeChild(b),(new Toast).show("删除成功")):(new Toast).show("删除失败")}}function initProductView(a){resetView();var b=document.getElementById(MAIN_TITLE_ID),c=document.getElementById(MAIN_CONTENT_ID),d=document.createElement("div");d.innerHTML="产品总览",d.className="horizontalSelected",d.style.width="100%",b.appendChild(d);for(var e=void 0==a?0:a.length,f=0;f<e;f++)initProductItemView(c,a[f]);addNewSeries(c)}function initProductItemView(a,b){var c=document.createElement("div");c.className="SS_IC";var d=document.createElement("hr");d.className="SS_IC_HL",c.appendChild(d);var e=document.createElement("div");e.className="SS_IC",e.style.height="90%";var f=document.createElement("div"),g=document.createElement("div");g.className="SS_IC_LABEL",g.innerHTML=b.label,g.ondblclick=function(){onSeriesNameClick(a,c,f,b)},f.appendChild(g),e.appendChild(f);var h=document.createElement("div");h.className="clearFloat",e.appendChild(h);var i=void 0==b||void 0==b.children?0:b.children.length;if(i<1){var j=document.createElement("div");j.className="SS_IC",j.style.height="30px",j.style.borderLeftWidth="0px",j.style.marginTop="10px";var k=document.createElement("hr");k.className="SS_IC_HL",j.appendChild(k);var l=document.createElement("div");l.className="B_B_D",l.style.width="100px",l.style.marginLeft="0px",l.innerHTML="编辑类型",l.onclick=function(){showSeries(b)},j.appendChild(l),e.appendChild(j)}else{for(var m=1,n=0;n<i;n++){m++;var o=b.children[n],p=document.createElement("div");p.className="SS_IC",p.style.height="30px",p.style.borderLeftWidth="0px",p.style.marginTop="10px";var q=document.createElement("hr");q.className="SS_IC_HL",p.appendChild(q);var r=document.createElement("div");r.className="SS_IC_LABEL",r.style.borderLeftWidth="1px",r.innerHTML=o.label,r.onclick=function(){onSeriesItemClick(b.seriesId)},p.appendChild(r);var s=void 0==o.children?0:o.children.length;if(s>0){var t=document.createElement("hr");t.className="SS_IC_HL",p.appendChild(t);var u=document.createElement("div");u.className="SS_IC_LABEL",u.style.width=60*s+"px",u.style.textAlign="left",u.style.borderLeftWidth="1px",u.onclick=function(){onSeriesItemClick(b.seriesId)},p.appendChild(u);for(var v=0;v<s;v++){var w=document.createElement("label");w.style.margin="10px";var x=o.children[v];w.innerHTML=x.label+x.meta,u.appendChild(w)}}e.appendChild(p)}c.style.height=40*m+"px"}c.appendChild(e),a.appendChild(c)}function addNewSeries(a){var b=document.createElement("div");b.className="SS_IC",b.style.height="50px";var c=document.createElement("hr");c.className="SS_IC_HL",b.appendChild(c);var d=document.createElement("button");d.className="managerItem_save",d.innerHTML="添加新系列",b.appendChild(d),d.onclick=function(){a.removeChild(b);var c=void 0==a.lastChild?void 0:a.lastChild.childId;c!=APP_CONST_CLIENT_ID&&!function(){var b=document.createElement("div");b.childId=APP_CONST_CLIENT_ID,b.className="SS_IC",b.style.height="50px";var c=document.createElement("hr");c.className="SS_IC_HL",b.appendChild(c);var d=document.createElement("div");d.className="SS_IC_LABEL",d.style.borderWidth="0px",d.style.width="300px";var e=document.createElement("input");e.className="SS_IC_LABEL",e.style.height="28px",e.style.borderLeftWidth="1px",d.appendChild(e);var f=document.createElement("div");f.innerHTML="保存",f.className="B_B_D",f.onclick=function(){""==e.value||void 0==e.value||null==e.value?(new Toast).show("请输入系列名称"):createSeries(a,e.value)},d.appendChild(f);var g=document.createElement("div");g.innerHTML="删除",g.className="B_B_D",g.onclick=function(){b.childId==APP_CONST_CLIENT_ID&&a.removeChild(b)},d.appendChild(g),b.appendChild(d),a.appendChild(b)}(),addNewSeries(a)},a.appendChild(b)}function onSeriesItemClick(a){if(void 0==a||null==a||""==a.trim())alert("error");else{for(var b=void 0,c=0;c<GLOBAL_PRODUCT_ENTITIES.length;c++)if(a==GLOBAL_PRODUCT_ENTITIES[c].seriesId){b=GLOBAL_PRODUCT_ENTITIES[c];break}showSeries(b)}}function onSeriesNameClick(a,b,c,d){c.innerHTML=null;var e=document.createElement("input");e.value=d.label,e.className="SS_IC_LABEL",e.style.height="28px",e.onblur=function(){},c.appendChild(e),e.focus();var f=document.createElement("div");f.innerHTML="取消",f.className="B_B_D",c.appendChild(f),f.onclick=function(){onSeriesNameBlur(a,b,c,d,d.label)};var g=document.createElement("div");g.innerHTML="保存",g.className="B_B_D",c.appendChild(g),g.onclick=function(){onSeriesNameBlur(a,b,c,d,e.value)};var h=document.createElement("div");h.innerHTML="禁用",h.className="B_B_D",h.onclick=function(){onSeriesNameBlur(c,d)},c.appendChild(h);var i=document.createElement("div");i.innerHTML="删除",i.className="B_B_D",i.onclick=function(){deleteSeries(a,b,d.seriesId)},c.appendChild(i)}function onSeriesNameBlur(a,b,c,d,e){c.innerHTML=null;var f=document.createElement("div");f.className="SS_IC_LABEL",f.innerHTML=e,f.ondblclick=function(){onSeriesNameClick(a,b,c,d)},c.appendChild(f),void 0!=e&&null!=e&&""!=e.trim()&&d.label!=e&&renameSeries(d.seriesId,e)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function initFormatView(a,b){var c=document.createElement("div");c.className="formatSubItemBar",c.style.height="45px";var d=document.createElement("div");d.id="formatMainBar",d.className="formatSubItemBar";var e=document.createElement("div");e.id="formatDiscountBar",e.className="formatSubItemBar";var f=document.createElement("div");f.id="formatPostBar",f.className="formatSubItemBar";var g=document.createElement("div");g.id="formatGiftBar",g.className="formatSubItemBar";var h=document.createElement("div");h.className="formatSubItemBar",h.style.height="97px";var i=document.createElement("div");i.className="formatDisplayLeftBar";var j=document.createElement("div");j.className="formatDisplayRightBar",j.innerHTML="保存",j.onclick=function(){saveFormat(b)},h.appendChild(i),h.appendChild(j);var k=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div");i.appendChild(k),i.appendChild(l),i.appendChild(m),a.appendChild(c),a.appendChild(d),a.appendChild(e),a.appendChild(f),a.appendChild(g),a.appendChild(h);for(var n=new Array,o=0;o<b.children.length;o++){var p=b.children[o];if(0==o){var q=new TabItem(p.formatId,p.label+p.meta,APP_CONST_ADD_NEW,"horizontalNormal","horizontalSelected","horizontalSelected");q.formatEntity=p,
n.push(q)}else{var r=new TabItem(p.formatId,p.label+p.meta,APP_CONST_ADD_NEW,"horizontalNormal","horizontalSelected","horizontalNormal");r.formatEntity=p,n.push(r)}}n.push(new TabItem(APP_CONST_ADD_NEW,"+",APP_CONST_ADD_NEW,"horizontalNormal","horizontalSelected","horizontalNormal")),initFormatSubView_title(c,n),initFormatSubView_main(d,b.children[0]),initFormatSubView_discount(e,b.children[0]),initFormatSubView_post(f,b.children[0]),initFormatSubView_gift(g,b.children[0])}function initFormatSubView_title(a,b){a.innerHTML=null,initHorizontalTabHostView(a,b,(780-2*b.length)/b.length,!1,function(){var c=this.dataId,d=void 0;if(c==APP_CONST_ADD_NEW){for(var e=!1,f=0;f<b.length;f++)b[f].id==APP_CONST_CLIENT_ID?(e=!0,b[f].currentClassName=b[f].selectedClassName,(new Toast).show("请先保存新规格")):b[f].currentClassName=b[f].normalClassName;e||b.splice(b.length-1,0,new TabItem(APP_CONST_CLIENT_ID,"新规格",APP_CONST_ADD_NEW,"horizontalNormal","horizontalSelected","horizontalSelected"))}else for(var g=0;g<b.length;g++)b[g].id==c?(b[g].currentClassName=b[g].selectedClassName,d=b[g].formatEntity):b[g].currentClassName=b[g].normalClassName;initFormatSubView_title(a,b),initFormatSubView_main(document.getElementById("formatMainBar"),d),initFormatSubView_discount(document.getElementById("formatDiscountBar"),d),initFormatSubView_post(document.getElementById("formatPostBar"),d),initFormatSubView_gift(document.getElementById("formatGiftBar"),d)})}function initFormatSubView_main(a,b){a.innerHTML=null;var c=document.createElement("input");c.setAttribute("type","checkbox"),c.className="formatDisplayCheckBox",c.id="vid_format_status",void 0==b?c.checked=!1:0==b.status?c.checked=!1:1==b.status&&(c.checked=!0),a.appendChild(c);var d=new FormatBaseViewInfo("规格","vid_format_label",void 0==b?"":b.label,"vid_format_label_unit",void 0==b?"":b.meta,(!0)),e=new FormatBaseViewInfo("数量","vid_format_mount",void 0==b?"":b.amount,"vid_format_mount_unit",void 0==b?"":b.amountMeta,(!0)),f=new FormatBaseViewInfo("定价","vid_format_pricing",void 0==b?"":b.pricing,"vid_format_pricing_unit",void 0==b?"":b.pricingMeta,(!0)),g=new FormatBaseViewInfo("邮费","vid_format_postage",void 0==b?"":b.postage,"vid_format_postage_unit",void 0==b?"":b.postageMeta,(!0)),h=new Array;h.push(d),h.push(e),h.push(f),h.push(g);var i=new Array;i.push(void 0==b?void 0:b.meta),i.push(void 0==b?void 0:b.amountMeta),i.push(void 0==b?void 0:b.pricingMeta),i.push(void 0==b?void 0:b.postageMeta);for(var j=0;j<4;j++)createInputSelectWidget(a,h[j],i[j]);var k=document.createElement("div");k.className="formatDisplayDelete",k.innerHTML="X",a.appendChild(k)}function initFormatSubView_discount(a,b){a.innerHTML=null;var c=document.createElement("input");c.setAttribute("type","checkbox"),c.className="formatDisplayCheckBox",c.id="vid_format_priceStatus",void 0==b?c.checked=!1:0==b.priceStatus?c.checked=!1:1==b.priceStatus&&(c.checked=!0),a.appendChild(c);var d=new FormatBaseViewInfo("折扣","vid_format_priceDiscount",void 0==b?"":b.priceDiscount,"vid_spaceholder",void 0==b?"":b.meta,(!1)),e=new FormatBaseViewInfo("现价","vid_format_price",void 0==b?"":b.price,"vid_spaceholder",void 0==b?"":b.meta,(!1)),f=new Array;f.push(d),f.push(e);for(var g=0;g<2;g++)createInputSelectWidget(a,f[g]);createFormatDatePickerWidget(a,"vid_format_discount_startTime",void 0==b?"请选择时间":b.priceStart),createFormatDatePickerWidget(a,"vid_format_discount_endTime",void 0==b?"请选择时间":b.priceEnd)}function initFormatSubView_post(a,b){a.innerHTML=null;var c=document.createElement("input");c.setAttribute("type","checkbox"),c.className="formatDisplayCheckBox",c.id="vid_format_expressStatus",void 0==b?c.checked=!1:0==b.expressStatus?c.checked=!1:1==b.expressStatus&&(c.checked=!0),a.appendChild(c);var d=new FormatBaseViewInfo("包邮","vid_format_expressCount",void 0==b?"":b.expressCount,"vid_spaceholder",void 0==b?"":b.meta,(!1));createInputSelectWidget(a,d),createFormatSelectWidget(a,"vid_format_express",EXPRESS,void 0==b?void 0:b.expressName,"请选择快递公司"),createFormatDatePickerWidget(a,"vid_format_express_startTime",void 0==b?"请选择时间":b.expressStart),createFormatDatePickerWidget(a,"vid_format_express_endTime",void 0==b?"请选择时间":b.expressEnd)}function initFormatSubView_gift(a,b){a.innerHTML=null;var c=document.createElement("input");c.setAttribute("type","checkbox"),c.className="formatDisplayCheckBox",c.id="vid_format_giftStatus",void 0==b?c.checked=!1:0==b.giftStatus?c.checked=!1:1==b.giftStatus&&(c.checked=!0),a.appendChild(c);var d=new FormatBaseViewInfo("满赠","vid_format_giftCount",void 0==b?"":b.giftCount,"vid_spaceholder",void 0==b?"":b.meta,(!1));createInputSelectWidget(a,d),createFormatSelectWidget(a,"vid_format_gift",["gift_product1","gift_product2"],void 0==b?"":b.giftLabel,"请选择赠送产品"),createFormatDatePickerWidget(a,"vid_format_gift_startTime",void 0==b?"请选择时间":b.giftStart),createFormatDatePickerWidget(a,"vid_format_gift_endTime",void 0==b?"请选择时间":b.giftEnd)}function createInputSelectWidget(a,b,c){var d=document.createElement("div");d.innerHTML=b.title,d.className="formatSubItemBar_main_widget_label",d.style.marginLeft="5px",a.appendChild(d);var e=document.createElement("input");if(e.className="formatSubItemBar_main_widget_number",e.value=b.label,e.id=b.labelId,a.appendChild(e),b.isSelector){var f=document.createElement("select");f.value=b.unit,f.id=b.unitId,f.className="formatSubItemBar_main_widget_meta",void 0==c?f.options.add(new Option("单位","单位")):f.options.add(new Option(c,"current"));for(var g=0;g<UNITS.length;g++)f.options.add(new Option(UNITS[g].label,UNITS[g].unitId));a.appendChild(f)}}function createFormatSelectWidget(a,b,c,d,e){var f=document.createElement("select");if(f.id=b,f.className="formatSubItemBar_main_widget_meta",f.style.width="200px",f.style.marginLeft="10px",void 0!=c){void 0==d?f.options.add(new Option(e,e)):f.options.add(new Option(d,"current"));for(var g=0;g<c.length;g++)f.options.add(new Option(c[g],c[g]))}a.appendChild(f)}function createFormatDatePickerWidget(a,b,c){var d=document.createElement("input");d.type="text",void 0==c?d.value="请选择时间":d.value=c,d.readOnly=!0,d.className="formatSubItemBar_main_widget_number",d.style.width="200px",d.style.marginLeft="10px",d.id=b,a.appendChild(d),new Pikaday({field:d,firstDay:1,minDate:new Date("2015-01-01"),maxDate:new Date("2020-12-31"),yearRange:[2015,2020]})}function saveFormat(a){var b=document.getElementById("vid_format_status"),c=document.getElementById("vid_format_label"),d=document.getElementById("vid_format_label_unit"),e=document.getElementById("vid_format_mount"),f=document.getElementById("vid_format_mount_unit"),g=document.getElementById("vid_format_pricing"),h=document.getElementById("vid_format_pricing_unit"),i=document.getElementById("vid_format_postage"),j=document.getElementById("vid_format_postage_unit"),k=document.getElementById("vid_format_priceStatus"),l=document.getElementById("vid_format_priceDiscount"),m=document.getElementById("vid_format_price"),n=document.getElementById("vid_format_discount_startTime"),o=document.getElementById("vid_format_discount_endTime"),p=document.getElementById("vid_format_expressStatus"),q=document.getElementById("vid_format_expressCount"),r=document.getElementById("vid_format_express"),s=document.getElementById("vid_format_express_startTime"),t=document.getElementById("vid_format_express_endTime"),u=document.getElementById("vid_format_giftStatus"),v=document.getElementById("vid_format_giftCount"),w=document.getElementById("vid_format_gift"),x=document.getElementById("vid_format_gift_startTime"),y=document.getElementById("vid_format_gift_endTime"),z="http://localhost:8080/foodslab/product/createFormat?typeId="+a.typeId;z=z+"&status="+(1==b.checked?1:0),z=z+"&label="+c.value,z=z+"&meta="+d.options[d.selectedIndex].text,z=z+"&amount="+e.value,z=z+"&amountMeta="+f.options[f.selectedIndex].text,z=z+"&pricing="+g.value,z=z+"&pricingMeta="+h.options[h.selectedIndex].text,z=z+"&postage="+i.value,z=z+"&postageMeta="+j.options[j.selectedIndex].text,z=z+"&priceStatus="+(1==k.checked?1:0),z=z+"&priceDiscount="+l.value,z=z+"&price="+m.value,z=z+"&priceStart="+n.value,z=z+"&priceEnd="+o.value,z=z+"&expressStatus="+(1==p.checked?1:0),z=z+"&expressCount="+q.value,z=z+"&expressName="+r.options[r.selectedIndex].text,z=z+"&expressStart="+s.value,z=z+"&expressEnd="+t.value,z=z+"&giftStatus="+(1==u.checked?1:0),z=z+"&giftCount="+v.value,z=z+"&giftLabel="+w.options[w.selectedIndex].text,z=z+"&giftStart="+x.value,z=z+"&giftEnd="+y.value,console.log(z),asyncRequestByGet(z,saveFormatCallback,onRequestError(),onRequestTimeout())}function saveFormatCallback(a){console.log(a)}function productType(){var a=BASE_PATH+"/product/retrieveType?typeId=aba4d190-6874-426a-883f-a1e561a6f879&managerId=xxx";asyncRequestByGet(a,onTypeDataCallBack,onRequestError(),onRequestTimeout())}function createType(a,b,c){var d=BASE_PATH+"/product/createType?seriesId="+b+"&label="+c;asyncRequestByGet(d,function(b){onTypeCreateDataCallback(a,b)},onRequestError(),onRequestTimeout())}function renameType(a,b){var c=BASE_PATH+"/product/updateType?seriesId="+a.seriesId+"&typeId="+a.typeId+"&label="+b+"&status=1";asyncRequestByGet(c,function(a){onTypeRenameDataCallback(a)},onRequestError(),onRequestTimeout())}function blockType(){}function deleteType(a,b,c){var d=BASE_PATH+"/product/updateType?seriesId="+c.seriesId+"&typeId="+c.typeId+"&label="+c.label+"&status=-1";asyncRequestByGet(d,function(c){onTypeDeleteDataCallback(a,b,c)},onRequestError(),onRequestTimeout())}function onTypeCreateDataCallback(a,b){var c=checkResponsDataFormat(b);if(c){var d=JSON.parse(b);200==d.code?((new Toast).show("创建成功"),a.removeChild(a.lastChild),a.removeChild(a.lastChild),initTypeView(a,d.data),addNewType(a)):(new Toast).show("创建失败")}}function onTypeRenameDataCallback(a){var b=checkResponsDataFormat(a);if(b){var c=JSON.parse(a);200==c.code?(new Toast).show("更新成功"):(new Toast).show("更新失败")}}function onTypeDeleteDataCallback(a,b,c){var d=checkResponsDataFormat(c);if(d){var e=JSON.parse(c);200==e.code?(a.removeChild(b),(new Toast).show("删除成功")):(new Toast).show("删除失败")}}function showSeries(a){CURRENT_SERIES_ENTITY=a,resetView();var b=document.getElementById(MAIN_TITLE_ID),c=document.getElementById(MAIN_CONTENT_ID),d=document.createElement("div");d.innerHTML="产品系列",d.className="horizontalSelected",d.style.width="100%",d.style.cursor="pointer",d.ondblclick=function(){backToProduct()},b.appendChild(d),initSeriesView(c,a)}function backToProduct(){CURRENT_SERIES_ENTITY=null,productSeries()}function initSeriesView(a,b){var c=document.createElement("div");c.className="SS_IC",c.style.height="150px";var d=document.createElement("hr");d.className="SS_IC_HL",c.appendChild(d);var e=document.createElement("div");e.className="SS_IC",e.style.height="90%";var f=document.createElement("div"),g=document.createElement("div");g.className="SS_IC_LABEL",g.innerHTML=b.label,g.onclick=function(){backToProduct()},f.appendChild(g),e.appendChild(f);var h=document.createElement("div");h.className="clearFloat",e.appendChild(h);var i=void 0==b||void 0==b.children?0:b.children.length;if(i>0)for(var j=0;j<i;j++)initTypeView(e,b.children[j]);c.style.height=80*(i+2)+"px",addNewType(e),c.appendChild(e),a.appendChild(c)}function initTypeView(a,b){var c=document.createElement("div");c.className="SS_IC",c.style.height="80px",c.style.borderLeftWidth="0px",c.style.marginTop="10px";var d=document.createElement("hr");d.className="SS_IC_HL",c.appendChild(d);var e=document.createElement("div");e.className="SS_IC",e.style.height="80px";var f=document.createElement("div"),g=document.createElement("div");g.className="SS_IC_LABEL",g.innerHTML=b.label,g.ondblclick=function(){onTypeNameClick(a,c,f,b)},f.appendChild(g),e.appendChild(f),c.appendChild(e),a.appendChild(c);var h=document.createElement("div");h.className="clearFloat",e.appendChild(h);var i=document.createElement("hr");i.className="SS_IC_HL",i.style.marginTop="25px",e.appendChild(i);var j=document.createElement("div");j.style.borderLeftWidth="1px",j.style.marginTop="10px",e.appendChild(j);var k=void 0==b.children?0:b.children.length;if(k>0){j.className="SS_IC_LABEL",j.style.width=50*k+"px";for(var l=0;l<k;l++){var m=document.createElement("label");m.style.width="50px",m.style.margin="10px";var n=b.children[l];m.innerHTML=n.label+n.meta,j.appendChild(m)}}else j.className="B_B_D",j.style.marginLeft="0px",j.style.width="80px",j.innerHTML="编辑规格";j.onclick=function(){showType(b)}}function addNewType(a){var b=document.createElement("div");b.className="SS_IC",b.style.height="30px",b.style.borderLeftWidth="0px",b.style.marginTop="10px";var c=document.createElement("hr");c.className="SS_IC_HL",b.appendChild(c);var d=document.createElement("div");d.className="B_B_D",d.style.width="100px",d.style.marginLeft="0px",d.innerHTML="添加类型",d.onclick=function(){a.removeChild(b);var c=void 0==a.lastChild?void 0:a.lastChild.childId;c!=APP_CONST_CLIENT_ID&&!function(){a.style.height=a.clientHeight+50+"px";var b=document.createElement("div");b.childId=APP_CONST_CLIENT_ID,b.className="SS_IC",b.style.height="40px",b.style.borderLeftWidth="0px",b.style.marginTop="15px";var c=document.createElement("hr");c.className="SS_IC_HL",b.appendChild(c);var d=document.createElement("div");d.className="SS_IC_LABEL",d.style.borderWidth="0px",d.style.width="300px";var e=document.createElement("input");e.className="SS_IC_LABEL",e.style.height="28px",e.style.borderLeftWidth="1px",d.appendChild(e),e.focus();var f=document.createElement("div");f.innerHTML="保存",f.className="B_B_D",f.onclick=function(){""==e.value||void 0==e.value||null==e.value?(new Toast).show("请输入类型名称"):createType(a,CURRENT_SERIES_ENTITY.seriesId,e.value)},d.appendChild(f);var g=document.createElement("div");g.innerHTML="删除",g.className="B_B_D",g.onclick=function(){a.style.height=a.clientHeight-50+"px",b.childId==APP_CONST_CLIENT_ID&&a.removeChild(b)},d.appendChild(g),b.appendChild(d),a.appendChild(b)}(),addNewType(a)},b.appendChild(d),a.appendChild(b)}function onTypeNameClick(a,b,c,d){c.innerHTML=null;var e=document.createElement("input");e.value=d.label,e.className="SS_IC_LABEL",e.style.height="28px",e.onblur=function(){},c.appendChild(e),e.focus();var f=document.createElement("div");f.innerHTML="取消",f.className="B_B_D",c.appendChild(f),f.onclick=function(){onTypeNameBlur(a,b,c,d,d.label)};var g=document.createElement("div");g.innerHTML="保存",g.className="B_B_D",c.appendChild(g),g.onclick=function(){onTypeNameBlur(a,b,c,d,e.value)};var h=document.createElement("div");h.innerHTML="禁用",h.className="B_B_D",c.appendChild(h),h.onclick=function(){onTypeNameBlur(a,b,c,d,d.label)};var i=document.createElement("div");i.innerHTML="删除",i.className="B_B_D",c.appendChild(i),i.onclick=function(){onTypeNameBlur(a,b,c,d,d.label),deleteType(a,b,d)}}function onTypeNameBlur(a,b,c,d,e){c.innerHTML=null;var f=document.createElement("div");f.className="SS_IC_LABEL",f.innerHTML=e,f.ondblclick=function(){onTypeNameClick(a,b,c,d)},c.appendChild(f),void 0!=e&&null!=e&&""!=e.trim()&&d.label!=e&&renameType(d,e)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function showType(a){resetView();var b=document.getElementById(MAIN_TITLE_ID);b.style.cursor="pointer",b.onclick=function(){backToSeries()};var c=document.getElementById(MAIN_CONTENT_ID),d=document.createElement("div");d.innerHTML="当前系列 >> 当前类型",d.className="horizontalSelected",d.style.width="100%",d.style.cursor="pointer",b.appendChild(d),initTypeDetailView(c,a)}function backToSeries(){document.getElementById(MAIN_TITLE_ID).ondblclick=null,showSeries(CURRENT_SERIES_ENTITY)}function initTypeDetailView(a,b){var c=document.createElement("div");c.className="descriptionContainer";var d=document.createElement("div");d.className="imageContainer";var e=document.createElement("canvas");e.className="imageCuter",d.appendChild(e);var f=document.createElement("div");f.className="imageCuterSubmit",f.innerHTML="保存修改",d.appendChild(f);var g=document.createElement("div");g.className="imageChoseContainer";var h=document.createElement("button");h.className="fileInput",h.innerHTML="添加图片";var i=document.createElement("button");i.className="fileInput",i.innerHTML="添加图片";var j=document.createElement("button");j.className="fileInput",j.style.width="34%",j.innerHTML="添加图片",g.appendChild(h),g.appendChild(i),g.appendChild(j),d.appendChild(g),c.appendChild(d);var k=document.createElement("div");k.className="textContainer";var l=document.createElement("textarea");l.id="descriptionTextArea",l.value=void 0==b.description?"":b.description,l.className="descriptionTextArea",k.appendChild(l);var m=document.createElement("div");m.className="formatArea",k.appendChild(m),c.appendChild(k),initFormatView(m,b),a.appendChild(c);var n=document.createElement("div");n.className="detailDescriptionContainer",initDetailEditorView(n,b),a.appendChild(n);var o=document.createElement("div");o.className="submitContainer",o.innerHTML="提交",o.onclick=function(){var a=document.getElementById("descriptionTextArea").value,c=document.getElementById("hyperEditor").innerHTML;asyncRequestByGet(BASE_PATH+"/product/updateTypeDetail?typeId="+b.typeId+"&description="+a+"&detail="+c,function(a){console.log(a)},onRequestError(),onRequestTimeout())},a.appendChild(o)}function initDetailEditorView(a,b){var c=document.createElement("div"),d=new HyperEditorTool("H1","formatblock","H1","button"),e=new HyperEditorTool("H2","formatblock","H2","button"),f=new HyperEditorTool("H3","formatblock","H3","button"),g=new HyperEditorTool("H4","formatblock","H4","button"),h=new HyperEditorTool("H5","formatblock","H5","button"),i=new HyperEditorTool("H6","formatblock","H6","button"),j=new HyperEditorTool("居左","justifyleft",null,"button"),k=new HyperEditorTool("居中","justifycenter",null,"button"),l=new HyperEditorTool("居右","justifyright",null,"button"),m=new HyperEditorTool("左缩进","outdent",null,"button"),n=new HyperEditorTool("右缩进","indent",null,"button"),o=new HyperEditorTool("有序列","insertorderedlist",null,"button"),p=new HyperEditorTool("无序列","insertunorderedlist",null,"button"),q=new HyperEditorTool("链接","createlink",null,"button"),r=new HyperEditorTool("图片",null,null,"button"),s=new HyperEditorTool("图片","formatblock",null,"file"),t=new Array;t.push(d),t.push(e),t.push(f),t.push(g),t.push(h),t.push(i),t.push(j),t.push(k),t.push(l),t.push(m),t.push(n),t.push(o),t.push(p),t.push(q),t.push(r),t.push(s);for(var u=0;u<t.length;u++)createHyperToolWidget(c,t[u]);var v=document.createElement("div");v.className="hyperEditor",v.id="hyperEditor",v.contentEditable=!0,console.log(b.detail),v.innerHTML=void 0==b.detail?"":b.detail,a.appendChild(c),a.appendChild(v)}function createHyperToolWidget(a,b){var c=document.createElement("input");c.type=b.viewType,c.className="hyperEditorToolButton","file"==c.type?(c.accept="image/*",c.onchange=function(){var a=window.URL.createObjectURL(c.files.item(0));document.execCommand("insertImage",!1,a),document.getElementById("hyperEditor").focus()}):(c.value=b.label,c.onclick=format,c.cmd=b.invoke,c.param=b.param),a.appendChild(c)}function format(){if("createlink"==this.cmd){var a=prompt("请输入网络地址","http://");a&&""!=a&&"http://"!=a&&document.execCommand(this.cmd,!1,a)}else document.execCommand(this.cmd,!1,this.param),document.getElementById("hyperEditor").focus()}function CircleProgress(a){this.progress=document.getElementById(a),this.context=this.progress.getContext("2d"),this.centerX=this.progress.width/2,this.centerY=this.progress.height/2,this.radius=Math.min(this.progress.width,this.progress.height)/3,this.context.translate(this.centerX,this.centerY)}function getArcLocation(a,b){var c=a*Math.cos(b),d=a*Math.sin(b);return new Array(c,d)}function showLoadingView(){var a=document.createElement("div");a.id="mask",a.style.position="absolute",a.style.top=getScrollTop()+"px",a.style.backgroundColor="#CCCCCC",a.style.width="100%",a.style.height="100%",a.style.left="0px",a.style.zIndex="10",a.style.opacity="0.6",document.body.appendChild(a);var b=document.createElement("canvas");b.id="canvas",b.style.position="absolute",b.style.top=getScrollTop()+100+"px",b.style.backgroundColor="#00FF0000",b.style.left=document.body.clientWidth/2-200+"px",b.style.width="400px",b.style.height="200px",b.style.zIndex="10",b.style.opacity="0.9",document.body.appendChild(b),document.documentElement.style.overflow="hidden";var c=new CircleProgress("canvas");c.rotate(30),document.oncontextmenu=new Function("event.returnValue=false;"),document.onselectstart=new Function("event.returnValue=false;"),window.onhelp=new Function("event.returnValue=false;"),document.onkeydown=function(){window.event&&13==window.event.keyCode&&(window.event.returnValue=!1)}}function dismissLoadingView(){document.onkeydown=null,document.documentElement.style.overflow="scroll",clearInterval(CircleProgress.prototype.task),document.oncontextmenu=new Function("event.returnValue=true;"),document.onselectstart=new Function("event.returnValue=true;"),document.body.removeChild(document.getElementById("mask")),document.body.removeChild(document.getElementById("canvas")),document.body.removeChild(document.getElementById("button"))}function getScrollTop(){var a;return window.pageYOffset?a=window.pageYOffset:document.compatMode&&"BackCompat"!=document.compatMode?a=document.documentElement.scrollTop:document.body&&(a=document.body.scrollTop),a}function recommend(){var a=BASE_PATH+"/product/convert";asyncRequestByGet(a,function(a){onConvertDataCallback(a)},onRequestError(),onRequestTimeout())}function swapRecommend(a,b,c,d){var e=BASE_PATH+"/product/swapWeight?formatId1="+a+"&weight1="+b+"&formatId2="+c+"&weight2="+d;asyncRequestByGet(e,function(a){onSwapDataCallback(a)},onRequestError(),onRequestTimeout())}function updateRecommend(a,b){var c=BASE_PATH+"/product/updateWeight?formatId="+a+"&weight="+b;asyncRequestByGet(c,function(a){var b=checkResponsDataFormat(a);if(b){var c=JSON.parse(a);200==c.code?(new Toast).show("更新成功"):(new Toast).show("更新失败")}onConvertDataCallback(a)},onRequestError(),onRequestTimeout())}function onSwapDataCallback(a){var b=checkResponsDataFormat(a);if(b){var c=JSON.parse(a);200==c.code?(new Toast).show("更新成功"):(new Toast).show("更新失败")}}function onConvertDataCallback(a){var b=checkResponsDataFormat(a);if(b){var c=JSON.parse(a);initRecommendView(c.data)}}function initRecommendView(a){resetView();var b=document.getElementById(MAIN_TITLE_ID),c=document.getElementById(MAIN_CONTENT_ID),d=document.createElement("div");d.innerHTML="推荐管理",d.className="horizontalSelected",d.style.width="100%",b.appendChild(d);for(var e=void 0==a?0:a.length,f=function(b){var d=a[b],e=document.createElement("div");e.className="SS_IC",e.style.height="40px",e.style.width="100%";var f=document.createElement("div");f.className="SS_IC",f.style.height="32px",f.style.width="100%",f.style.borderWidth="0px";var g=document.createElement("hr");g.className="SS_IC_HL",f.appendChild(g);var h=document.createElement("div");h.className="SS_IC_LABEL",h.style.borderLeftWidth="1px",h.innerHTML=d.parent.parent.label,f.appendChild(h);var i=document.createElement("hr");i.className="SS_IC_HL",f.appendChild(i);var j=document.createElement("div");j.className="SS_IC_LABEL",j.style.borderLeftWidth="1px",j.innerHTML=d.parent.label,f.appendChild(j);var k=document.createElement("hr");k.className="SS_IC_HL",f.appendChild(k);var l=document.createElement("div");if(l.className="SS_IC_LABEL",l.style.borderLeftWidth="1px",l.style.width="70%",l.innerHTML=d.label+" "+d.meta,f.appendChild(l),b>8){h.style.cursor="default",j.style.cursor="default",l.style.cursor="default";var m=document.createElement("hr");m.className="SS_IC_HL",f.appendChild(m);var n=document.createElement("div");n.className="SS_IC_LABEL",n.style.borderLeftWidth="1px",n.style.width="50px",n.innerHTML="↓↑ ",n.formatId=d.formatId,n.weight=d.weight,n.onclick=function(){updateRecommend(d.formatId,0)},f.appendChild(n)}else f.id=d.formatId,f.weight=d.weight,f.draggable="true",f.style.cursor="move",f.addEventListener("dragstart",onDragStart),f.addEventListener("dragover",onDragOver),f.addEventListener("drop",onDrop),f.addEventListener("dragend",onDragEnd),h.style.cursor="move",j.style.cursor="move",l.style.cursor="move";e.appendChild(f),c.appendChild(e)},g=0;g<e;g++)f(g)}function onDragStart(a){a.dataTransfer.setData("formatId",a.target.id),a.dataTransfer.setData("weight",a.target.weight)}function onDragOver(a){a.preventDefault()}function onDrop(a){a.preventDefault();var b=a.dataTransfer.getData("formatId"),c=a.dataTransfer.getData("weight"),d=""==a.target.id||void 0==a.target.id?a.target.parentNode.id:a.target.id,e=""==a.target.weight||void 0==a.target.weight?a.target.parentNode.weight:a.target.weight,f=document.getElementById(d),g=document.getElementById(b),h=f.innerHTML;f.innerHTML=g.innerHTML,g.innerHTML=h,a.dataTransfer.setData("sourceFormatId",b),a.dataTransfer.setData("sourceWeight",c),a.dataTransfer.setData("targetFormatId",d),a.dataTransfer.setData("targetWeight",e),swapRecommend(b,c,d,e)}function onDragEnd(a){a.dataTransfer.getData("sourceFormatId"),a.dataTransfer.getData("sourceWeight"),a.dataTransfer.getData("targetFormatId"),a.dataTransfer.getData("targetWeight");a.dataTransfer.clearData()}function initSkinView(){resetView();var a=document.getElementById(MAIN_TITLE_ID),b=document.getElementById(MAIN_CONTENT_ID),c=document.createElement("div");c.innerHTML="皮肤设置",c.className="horizontalSelected",c.style.width="100%",a.appendChild(c);var d=new Array;d.push("简单 洁净 明亮"),d.push("传统 稳重 古典"),d.push("轻快 时尚 进步"),d.push("沉稳 肃穆 安静");for(var e=0;e<d.length;e++)b.appendChild(createItemWidget(d[e]))}function createItemWidget(a){var b=document.createElement("div");b.className="SS_IC",b.style.borderWidth="1px",b.style.width="100%",b.style.height="300px",b.style.marginBottom="20px";var c=document.createElement("div");c.className="SS_IC",c.style.width="133px",c.style.height="100%",c.style.lineHeight="300px",c.style.textAlign="center",c.style.borderWidth="0px",c.innerHTML=a;var d=document.createElement("div");d.className="SS_IC",d.style.width="310px",d.style.height="100%";var e=document.createElement("div");e.className="SS_IC",e.style.width="310px",e.style.height="100%";var f=document.createElement("div");return f.className="SS_IC",f.style.width="310px",f.style.height="100%",b.appendChild(c),b.appendChild(d),b.appendChild(e),b.appendChild(f),b}function TabItem(a,b,c,d,e,f,g,h,i,j,k){this.id=a,this.displayName=b,this.method=c,this.normalClassName=d,this.selectedClassName=e,this.currentClassName=f,this.verticalNormalArrowClassName=g,this.verticalSelectedArrowClassName=h,this.verticalCurrentArrowClassName=i,this.width=j,this.height=k}function addExclusiveId(a){null!==a&&void 0!==a&&""!==a&&exclusiveIds.indexOf(a)<0&&exclusiveIds.push(a)}function initHorizontalTabHostView(a,b,c,d,e){var f=parseInt(a.clientWidth),g=parseInt(a.clientHeight),h=b.length,i=(f-3*(h-1))/h;null!=c&&(i=c);for(var j=0;j<h;j++){var k=b[j];k.width=i,k.height=g,createTabItem(a,k,!1,e)}d&&addExclusiveId(a.id)}function initVerticalTabHostView(a,b,c){for(var d=parseInt(a.clientWidth),e=parseInt(a.clientHeight),f=b.length,g=e/f,h=0;h<f;h++){var i=b[h];i.width=d,i.height=g,createTabItem(a,i,!0)}c&&addExclusiveId(a.id)}function createTabItem(a,b,c,d){var e=document.createElement("div");if(e.innerHTML=b.displayName,e.style.width=b.width+"px",e.className=b.currentClassName,e.normalClassName=b.normalClassName,e.selectedClassName=b.selectedClassName,e.method=b.method,e.dataId=b.id,void 0==d||e.method!=APP_CONST_ADD_NEW&&e.id!=APP_CONST_ADD_NEW?e.addEventListener("click",onTabItemClick):e.addEventListener("click",d),c){var f=document.createElement("div");f.className=b.verticalCurrentArrowClassName,f.normalClassName=b.verticalNormalArrowClassName,f.selectedClassName=b.verticalSelectedArrowClassName,e.appendChild(f)}a.appendChild(e)}function resetTabHost(a){for(var b=a.childElementCount,c=0;c<b;c++)a.childNodes[c].className=a.childNodes[c].normalClassName,a.childNodes[c].childNodes.length>1&&(a.childNodes[c].childNodes[1].className=a.childNodes[c].childNodes[1].normalClassName,a.childNodes[1].className=a.childNodes[1].normalClassName)}function onTabItemClick(){for(var a=this.parentNode.childElementCount,b=0;b<a;b++)this.parentNode.childNodes[b].className=this.normalClassName,this.childNodes.length>1&&(this.parentNode.childNodes[b].childNodes[1].className=this.parentNode.childNodes[b].childNodes[1].normalClassName,this.childNodes[1].className=this.childNodes[1].normalClassName);if(this.className=this.selectedClassName,this.childNodes.length>1&&(this.childNodes[1].className=this.childNodes[1].selectedClassName),exclusiveIds.indexOf(this.parentNode.id)>=0)for(var b=0;b<exclusiveIds.length;b++)this.parentNode.id!==exclusiveIds[b]&&resetTabHost(document.getElementById(exclusiveIds[b]));onFrameMenuItemClick(this.method),new Toast(TOAST_CONTAINER_ID,null,null,200,30).show(this.childNodes[0].data)}function Toast(a,b,c,d,e,f){void 0!=a&&""!=a&&null!=a||(a="body"),0!=d&&void 0!=d&&""!=d&&null!=d||(d=200),0!=e&&void 0!=e&&""!=e&&null!=e||(e=30),this.view=document.getElementById(a),this.startX=b,this.startY=c,this.width=d,this.height=e,this.className=f,this.opacity=1,this.step=.01,this.duration=10}function dismiss(){document.body.removeChild(document.getElementById("toastView"))}function isNull(a){return null===a||void 0===a||""===a}var BASE_PATH="http://localhost:8080/foodslab",MAIN_TITLE_ID="main_title",MAIN_CONTENT_ID="main_content_container",TOAST_CONTAINER_ID="body",APP_CONST_MENU=new Array,APP_CONST_CLIENT_ID="clientId",APP_CONST_ADD_NEW="addNew",menuUrl=BASE_PATH+"/menus",UNITS=void 0,EXPRESS=["顺丰快递","圆通快递","中通快递","邮政快递"],_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ManagerEntity=function(){function a(b,c,d,e,f,g,h){_classCallCheck(this,a),this.managerId=b,this.username=c,this.level=d,this.queue=e,this.status=f,this.pId=g,this.managerMenuEntitiesMapping=h,this.isUsernameU=!1,this.password="",this.isPasswordU=!1,this.isStatusU=!1}return _createClass(a,[{key:"setUsernameUpdate",value:function(a){this.isUsernameU=a}},{key:"setPassword",value:function(a){this.password=a}},{key:"setPasswordUpdate",value:function(a){this.isPasswordU=a}},{key:"setPasswordUpdate",value:function(a){this.isStatusU=isStatusU}},{key:"toString",value:function(){return"("+this.managerId+", "+this.username+")"}}]),a}(),ManagerMenuEntity=function(){function a(b,c,d){_classCallCheck(this,a),this.managerId=b,this.menuId=c,this.menuLabel=d}return _createClass(a,[{key:"toString",value:function(){return"("+this.managerId+", "+this.username+")"}}]),a}(),GLOBAL_PRODUCT_ENTITIES=void 0,FormatBaseViewInfo=function a(b,c,d,e,f,g){_classCallCheck(this,a),this.title=b,this.labelId=c,this.label=d,this.unitId=e,this.unitLabel=f,this.isSelector=g},CURRENT_SERIES_ENTITY=void 0,HyperEditorTool=function b(a,c,d,e){_classCallCheck(this,b),this.label=a,this.invoke=c,this.param=d,this.viewType=e};CircleProgress.prototype.drawCircleProgress=function(){this.context.clearRect(0-this.centerX,0-this.centerY,2*this.centerX,2*this.centerY);for(var a=15,b=0,c=a,d=0;d<15;d++){var e=Math.acos((2*Math.pow(this.radius,2)-Math.pow(a+c,2)-5)/(2*Math.pow(this.radius,2)))*(180/Math.PI),f=getArcLocation(this.radius,-(e+b)*Math.PI/180);this.context.fillStyle="#FFFFFF",this.context.beginPath(),this.context.arc(f[0],f[1],c,0*Math.PI,2*Math.PI,!0),this.context.closePath(),this.context.fill(),a=c,c--,b+=e}},CircleProgress.prototype.rotate=function(a){this.drawCircleProgress();var b=this;CircleProgress.prototype.task=setInterval(function(){b.context.rotate(10*Math.PI/180),b.drawCircleProgress()},a)};var exclusiveIds=new Array;Toast.prototype.show=function(a){var b=this.view.offsetLeft+this.view.clientWidth/4,c=this.view.offsetTop,d=this.view.clientWidth/2,e=this.view.clientHeight/2,f=document.createElement("div");
f.id="toastView",f.style.styleFloat="left",f.style.position="fixed",f.style.zIndex="10",isNull(this.startX)||(b=this.startX),isNull(this.startY)||(c=this.startY),isNull(this.width)||(d=this.width,isNull(this.startX)&&(b=this.view.clientWidth/2-d/2)),isNull(this.height)||(e=this.height),isNull(this.className)?(f.style.left=b+"px",f.style.top=c+"px",f.style.width=d+"px",f.style.height=e+"px",f.style.lineHeight=e+"px",f.style.textAlign="center",f.style.color="#FFFFFF",f.style.backgroundColor="#CCCCCC",f.style.opacity=this.opacity,f.style.borderRight="1px solid #999999",f.style.borderBottom="1px solid #999999",f.style.borderLeft="1px solid #999999",f.style.borderBottomRightRadius="5px",f.style.borderBottomLeftRadius="5px"):f.className=this.className,isNull(a)?f.innerHTML="you can set message here":f.innerHTML=a,document.body.appendChild(f);var g=this.opacity,h=this.step,i=setTimeout(function(){var a=setInterval(function(){g<0?(clearInterval(a),dismiss()):f.style.opacity=g,g-=h},this.duration);clearTimeout(i)},1e3)};