/*! foodslab-back-end 2016-10-08 */
"use strict";function resetView(){var a=document.getElementById(MAIN_TITLE_ID);a.innerHTML=null;var b=document.getElementById(MAIN_CONTENT_ID);b.innerHTML=null}function asyncRequestByGet(a,b,c,d){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&200==e.status&&b(e.responseText)},e.timeout=5e3,e.ontimeout=d,e.open("GET",a,!0),e.send(null)}function asyncRequestByPost(a,b,c,d,e){var f=new XMLHttpRequest;f.onreadystatechange=function(){4==f.readyState&&200==f.status?b(f.responseText):c()},f.timeout=5e3,f.ontimeout=d,f.open("POST",a,!0),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(encodeURI(e))}function onErrorCallback(){}function onTimeoutCallback(){}function checkResponseDataFormat(a){return!0}function applicationOnload(){requestMenus("")}function onRequestError(){}function onRequestTimeout(){}function requestMenus(a){requestMeta(),asyncRequestByGet(menuUrl,onMenuDataCallback,onRequestError,onRequestTimeout)}function requestMeta(){asyncRequestByGet(BASE_PATH+"/meta",onMetaCallback,onRequestError,onRequestTimeout)}function onMetaCallback(a){var b=JSON.parse(a);UNITS=b.data}function onMenuDataCallback(a){for(var b=JSON.parse(a),c=(b.code,b.message,b.data),d=new Array,e=new Array,f=0;f<c.length;f++){var g=c[f];1==g.status&&(g.menuLabel=g.label,APP_CONST_MENU.push(g)),"top"==g.position?d.push(new TabItem(g.menuId,g.label,g.method,"horizontalIndexNormal","horizontalIndexSelect","horizontalIndexNormal")):"left"==g.position&&e.push(new TabItem(g.menuId,g.label,g.method,"verticalNormal","verticalSelected","verticalNormal","verticalNormalArrow","verticalSelectedArrow","verticalNormalArrow"))}initHorizontalTabHostView(document.getElementById("header_menu"),d,100,!0),initVerticalTabHostView(document.getElementById("leftMenu"),e,!0)}function onFrameMenuItemClick(a){"manager"==a?(resetView(),managerIndex()):"product"==a?(resetView(),initProduct()):"recommend"==a?(resetView(),recommend()):"link"==a?(resetView(),link()):"poster"==a?(resetView(),posterInit()):"skin"==a?(resetView(),initSkinView()):"user"==a?(resetView(),showUsers()):"order"==a?(resetView(),showOrderView()):"message"==a?(resetView(),showMessageView()):(console.log(a),console.log("点击判断值超出范围"))}function createSearchWidget(a,b){var c=document.createElement("div");c.className="searchWidgetContainer",c.style.width=a;var d=document.createElement("input");d.className="searchInput",d.style.width="89%",c.appendChild(d);var e=document.createElement("div");return e.className="actionButton",e.style.width="10%",e.innerHTML="搜索",e.onclick=function(){b(d.value)},c.appendChild(e),c}function link(){var a=BASE_PATH+"/link";asyncRequestByGet(a,function(a){onLinkDataCallback(a)},onRequestError(),onRequestTimeout())}function createLink(a,b,c,d){var e=BASE_PATH+"/link/create?pid="+b+"&label="+c+"&href="+d;asyncRequestByGet(e,function(c){onCreateLinkDataCallback(b,a,c)},onRequestError(),onRequestTimeout())}function updateLink(a,b,c,d,e,f,g){var h=void 0;h=void 0==g?BASE_PATH+"/link/update?linkId="+c+"&pid="+d+"&label="+e+"&href="+f+"&status=1":BASE_PATH+"/link/update?linkId="+c+"&pid="+d+"&label="+e+"&href="+f+"&status=-1",void 0==h?(new Toast).show("信息缺失,无法提交"):asyncRequestByGet(h,function(c){onUpdateLinkDataCallback(a,b,c,g)},onRequestError(),onRequestTimeout())}function onLinkDataCallback(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);initLinkRootView(c.data)}}function onCreateLinkDataCallback(a,b,c){var d=checkResponseDataFormat(c);if(d){var e=JSON.parse(c);200==e.code?((new Toast).show("创建成功"),b.removeChild(b.lastChild),b.style.height=b.clientHeight+50+"px",b.parentNode.style.height=b.parentNode.clientHeight+50+"px",createLinkItemView(a,b,e.data),createLinkItemView(a,b,void 0)):(new Toast).show("创建失败")}}function onUpdateLinkDataCallback(a,b,c,d){var e=checkResponsDataFormat(c);if(e){var f=JSON.parse(c);200==f.code?((new Toast).show("更新成功"),d&&(a.removeChild(b),a.style.height=a.clientHeight-50+"px",a.parentNode.style.height=a.parentNode.clientHeight-50+"px")):(new Toast).show("更新失败")}}function initLinkRootView(a){resetView();var b=document.getElementById(MAIN_TITLE_ID),c=document.getElementById(MAIN_CONTENT_ID),d=document.createElement("div");d.innerHTML="链接管理",d.className="horizontalSelected",d.style.width="100%",b.appendChild(d);for(var e=void 0==a?0:a.length,f=0;f<e;f++){var g=a[f],h=document.createElement("div");h.className="SS_IC",h.style.height="60px",h.style.width="100%";var i=document.createElement("div");i.className="SS_IC",i.style.height="40px",i.style.width="122px",i.style.borderLeftWidth="0px";var j=document.createElement("hr");j.className="SS_IC_HL",j.style.marginTop="20px",i.appendChild(j);var k=document.createElement("div");k.className="SS_IC_LABEL",k.style.borderLeftWidth="1px",k.style.marginTop="5px",k.innerHTML=g.label,k.style.cursor="default",i.appendChild(k);var l=document.createElement("hr");l.className="SS_IC_HL",l.style.marginTop="20px",i.appendChild(l),h.appendChild(i);var m=document.createElement("div");m.className="SS_IC",m.style.width="900px";for(var n=void 0==g.children?0:g.children.length,o=0;o<n;o++){var p=g.children[o];createLinkItemView(g.linkId,m,p)}createLinkItemView(g.linkId,m,void 0),h.appendChild(m),m.style.height=40*(n+1)+"px",m.parentNode.style.height=40*(n+1)+20+"px",c.appendChild(h)}}function createLinkItemView(a,b,c){var d=document.createElement("div");d.className="SS_IC",d.style.width="100%",d.style.height="30px",d.style.marginBottom="10px",d.style.borderLeftWidth="0px";var e=document.createElement("hr");e.className="SS_IC_HL",e.style.marginTop="20px",d.appendChild(e);var f=document.createElement("div");if(f.className="SS_IC",f.style.width="870px",f.style.height="30px",f.style.borderLeftWidth="0px",d.appendChild(f),void 0==c){var g=document.createElement("div");g.className="SS_IC_LABEL",g.style.width="870px",g.style.height="30px",g.style.marginTop="5px",g.style.borderLeftWidth="1px",g.innerHTML="+",g.onclick=function(){onAddNewLinkViewClick(b,a,f,void 0)},f.appendChild(g),d.appendChild(f)}else{var h=document.createElement("div");h.className="SS_IC_LABEL",h.style.width="100px",h.style.height="30px",h.style.marginTop="5px",h.style.borderLeftWidth="1px",h.innerHTML=c.label,h.ondblclick=function(){onAddNewLinkViewClick(b,a,f,c)},f.appendChild(h);var i=document.createElement("hr");i.className="SS_IC_HL",i.style.marginTop="20px",f.appendChild(i);var j=document.createElement("div");j.className="SS_IC_LABEL",j.style.width="736px",j.style.height="30px",j.style.marginTop="5px",j.style.borderLeftWidth="1px",j.style.textAlign="left",j.style.paddingLeft="10px",j.innerHTML=c.href,j.ondblclick=function(){onAddNewLinkViewClick(b,a,f,c)},f.appendChild(j)}b.appendChild(d)}function onAddNewLinkViewClick(a,b,c,d){c.innerHTML=null;var e=document.createElement("input");e.className="SS_IC_LABEL",e.style.width="100px",e.style.height="30px",e.style.marginTop="5px",e.style.borderLeftWidth="1px",c.appendChild(e),void 0!=d?e.value=d.label:e.focus();var f=document.createElement("hr");f.className="SS_IC_HL",f.style.marginTop="20px",c.appendChild(f);var g=document.createElement("input");g.className="SS_IC_LABEL",void 0==d?g.style.width="602px":g.style.width="532px",g.style.height="30px",g.style.marginTop="5px",g.style.borderLeftWidth="1px",c.appendChild(g),void 0!=d&&(g.value=d.href,g.focus());var h=document.createElement("div");h.className="B_B_D",h.style.marginTop="5px",h.style.height="33px",h.innerHTML="取消",h.onclick=function(){if(c.innerHTML=null,void 0==d){var e=document.createElement("div");e.className="SS_IC_LABEL",e.style.width="870px",e.style.height="30px",e.style.marginTop="5px",e.style.borderLeftWidth="1px",e.innerHTML="+",e.onclick=function(){onAddNewLinkViewClick(a,b,c,d)},c.appendChild(e)}else{var f=document.createElement("div");f.className="SS_IC_LABEL",f.style.width="100px",f.style.height="30px",f.style.marginTop="5px",f.style.borderLeftWidth="1px",f.innerHTML=d.label,f.ondblclick=function(){onAddNewLinkViewClick(a,b,c,d)},c.appendChild(f);var g=document.createElement("hr");g.className="SS_IC_HL",g.style.marginTop="20px",c.appendChild(g);var h=document.createElement("div");h.className="SS_IC_LABEL",h.style.width="736px",h.style.height="30px",h.style.marginTop="5px",h.style.borderLeftWidth="1px",h.style.textAlign="left",h.style.paddingLeft="10px",h.innerHTML=d.href,h.ondblclick=function(){onAddNewLinkViewClick(a,b,c,d)},c.appendChild(h)}},c.appendChild(h);var i=document.createElement("div");if(i.className="B_B_D",i.style.marginTop="5px",i.style.height="33px",i.innerHTML="保存",i.onclick=function(){if(void 0==g.value||null==g.value||""==g.value.trim()||void 0==e.value||null==e.value||""==e.value.trim())(new Toast).show("请输入完整信息");else if(void 0==d)createLink(a,b,e.value,g.value);else{updateLink(a,c.parentNode,d.linkId,d.pid,e.value,g.value,void 0),c.innerHTML=null;var f=document.createElement("div");f.className="SS_IC_LABEL",f.style.width="100px",f.style.height="30px",f.style.marginTop="5px",f.style.borderLeftWidth="1px",f.innerHTML=e.value,f.ondblclick=function(){onAddNewLinkViewClick(a,b,c,d)},c.appendChild(f);var h=document.createElement("hr");h.className="SS_IC_HL",h.style.marginTop="20px",c.appendChild(h);var i=document.createElement("div");i.className="SS_IC_LABEL",i.style.width="736px",i.style.height="30px",i.style.marginTop="5px",i.style.borderLeftWidth="1px",i.style.textAlign="left",i.style.paddingLeft="10px",i.innerHTML=g.value,i.ondblclick=function(){onAddNewLinkViewClick(a,b,c,d)},c.appendChild(i)}},c.appendChild(i),void 0!=d){var j=document.createElement("div");j.className="B_B_D",j.style.marginTop="5px",j.style.height="33px",j.innerHTML="删除",j.onclick=function(){updateLink(a,c.parentNode,d.linkId,d.pid,d.label,d.href,-1)},c.appendChild(j)}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function managerIndex(){var a=BASE_PATH+"/manager";asyncRequestByGet(a,onIndexDataCallback,onRequestError(),onRequestTimeout())}function onIndexDataCallback(a){var b=checkResponseDataFormat(a);if(b){var c=new Array(new TabItem("1","管理员信息","","horizontalNormal","horizontalSelected","horizontalSelected"));initHorizontalTabHostView(document.getElementById(MAIN_TITLE_ID),c);for(var d=JSON.parse(a),e=d.data,f=new Array,g=0;g<e.length;g++){var h=e[g];f.push(new ManagerEntity(h.managerId,h.username,h.level,h.queue,h.status,h.pId,h.managerMenuEntitiesMapping))}var i=document.createElement("div");i.id="managerContainer",i.className="managerContainer",document.getElementById(MAIN_CONTENT_ID).appendChild(i),initManagerList(i,f)}}function check(a){var b=BASE_PATH+"/manager/check";asyncRequestByPost(b,function(a){var b=JSON.parse(a),c=b.data;"true"==c?(new Toast).show("用户名已经存在"):(new Toast).show("用户名可用")},onRequestError,onRequestTimeout,"username="+a)}function create(a,b,c){for(var d=BASE_PATH+"/manager/create",e="",f=0;f<c.length;f++){var g=c[f];e=e+","+g.menuId+":"+g.label}var h="pid=xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx&username="+a+"&password="+b+"&menus="+e;asyncRequestByPost(d,function(a){var b=JSON.parse(a),c=b.data;"false"==c?(new Toast).show("创建失败"):(new Toast).show("创建成功")},onRequestError,onRequestTimeout,h)}function update(a,b,c,d){for(var e=BASE_PATH+"/manager/update",f="",g=0;g<d.length;g++){var h=d[g];f=f+","+h.menuId+":"+h.menuLabel}var i="managerId="+a+"&username="+b+"&password="+c+"&menus="+f;asyncRequestByPost(e,function(a){var b=JSON.parse(a),c=b.data;"false"==c?(new Toast).show("更新失败"):(new Toast).show("更新成功")},onRequestError,onRequestTimeout,i)}function initManagerList(a,b){a.innerHTML=null;var c=b.length;a.style.height=240*c+"px";for(var d=0;d<c;d++)a.appendChild(createManagerItemView(b[d]));var e=document.createElement("button");e.className="managerItem_save",e.innerHTML="添加管理员",a.appendChild(e),e.onclick=function(){b.push(new ManagerEntity(APP_CONST_CLIENT_ID,"default",1,1,"",new Array)),initManagerList(a,b)}}function createManagerItemView(a){var b=document.createElement("div");b.className="managerItemContainer";var c=document.createElement("div");c.className="managerItem_rowLevel1";var d=document.createElement("hr");d.className="managerItem_connectLineHLevel1",c.appendChild(d);var e=document.createElement("div");e.className="managerItem_managerName",e.innerHTML=a.username,c.appendChild(initWidgetEditable1(e,a)),b.appendChild(c);var f=document.createElement("hr");f.className="managerItem_connectLineV",b.appendChild(f);var g=document.createElement("div");g.className="managerItem_rowLevel2";var h=document.createElement("hr");h.className="managerItem_connectLineHLevel2",g.appendChild(h);var i=document.createElement("div");i.className="managerItem_label",i.innerHTML="密码:",g.appendChild(i);var j=document.createElement("div");j.className="managerItem_managerEditor",g.appendChild(initWidgetEditable2(j,a,"password1")),b.appendChild(g);var k=document.createElement("div");k.className="managerItem_rowLevel2";var l=document.createElement("hr");l.className="managerItem_connectLineHLevel2",k.appendChild(l);var m=document.createElement("div");m.className="managerItem_label",m.innerHTML="确认:",k.appendChild(m);var n=document.createElement("div");if(n.className="managerItem_managerEditor",k.appendChild(initWidgetEditable2(n,a,"password2")),b.appendChild(k),1==a.level){var o=document.createElement("div");o.className="managerItem_rowLevel2";var p=document.createElement("hr");p.className="managerItem_connectLineHLevel2",o.appendChild(p);var q=document.createElement("div");q.className="managerItem_label",q.innerHTML="权限:",o.appendChild(q);var r=document.createElement("div");r.className="managerItem_managerEditor",r.style.width="90%";for(var s=void 0==a.managerMenuEntitiesMapping?new Array:a.managerMenuEntitiesMapping,t=new Array,u=0;u<APP_CONST_MENU.length;u++){for(var v=APP_CONST_MENU[u],w=void 0,x=0;x<s.length;x++){var y=s[x];if(v.menuId==y.menuId){w=1;break}}w||t.push(v)}initWidgetSelector(r,s,t),o.appendChild(r),b.appendChild(o)}var z=document.createElement("div");z.className="managerItem_rowLevel2";var A=document.createElement("hr");A.className="managerItem_connectLineHLevel2",z.appendChild(A);var B=document.createElement("button");return B.className="managerItem_save",B.innerHTML="确认保存",B.onclick=function(){var b=r.menus;a.managerId==APP_CONST_CLIENT_ID?create(e.innerText,j.password,b):update(a.managerId,e.innerText,j.password,b)},z.appendChild(B),b.appendChild(z),b}function initWidgetEditable1(a,b){if(a.innerHTML=null,void 0==b.currentUserNameStatus||"normalDisplay"==b.currentUserNameStatus){var c=document.createElement("div");c.className="widget_editable_block",c.innerHTML=b.username,a.appendChild(c),c.addEventListener("dblclick",function(){b.currentUserNameStatus="selectDisplay",1==b.level&&(a.style.width="300px"),initWidgetEditable1(a,b)})}else"selectDisplay"==b.currentUserNameStatus&&!function(){var c=document.createElement("input");if(c.className="widget_editable_block",c.type="text",c.style.fontSize="1rem",c.value=b.username,a.appendChild(c),1==b.level&&b.managerId!=APP_CONST_CLIENT_ID){var d=document.createElement("div");d.type="button",d.className="widget_editable_button",d.innerHTML="禁用";var e=document.createElement("div");e.type="button",e.className="widget_editable_button",e.innerHTML="删除",a.appendChild(d),a.appendChild(e)}c.addEventListener("blur",function(){a.style.width="200px",b.currentUserNameStatus="normalDisplay",b.username=c.value,initWidgetEditable1(a,b),check(b.username)})}();return a}function initWidgetEditable2(a,b,c){if(a.innerHTML=null,void 0==b.currentPassword1Status||"normalDisplay"==b.currentPassword1Status){var d=document.createElement("div");d.className="widget_editable_block",d.id=c,void 0!=b.passowrd1&&""!=b.passowrd1&&(d.value=b.passowrd1,d.innerText="......"),a.appendChild(d),d.addEventListener("dblclick",function(){b.currentPassword1Status="selectDisplay",initWidgetEditable2(a,b)})}else"selectDisplay"==b.currentPassword1Status&&!function(){var d=document.createElement("input");d.innerHTML=null,d.id=c,d.className="widget_editable_block",d.type="password",d.style.fontSize="1rem",a.appendChild(d),d.addEventListener("blur",function(){b.currentPassword1Status="normalDisplay",b.passowrd1=d.value,a.password=d.value,initWidgetEditable2(a,b)})}();return a}function initWidgetSelector(a,b,c){a.innerHTML=null;var d=b.length;a.menus=b;for(var e=function(e){var f=b[e],g=document.createElement("div");g.className="selector_selected",g.innerHTML=f.menuLabel;var h=document.createElement("div");h.innerHTML="X",h.className="selector_selected_delete",g.appendChild(h),g.onmousemove=function(){h.style.visibility="visible",h.onclick=function(){var g=b.slice(0,e),h=b.slice(e+1,d);b=g.concat(h),c.push(f),initWidgetSelector(a,b,c)}},g.onmouseout=function(){h.style.visibility="hidden"},a.appendChild(g)},f=0;f<d;f++)e(f);var g=c.length;g>0&&!function(){var d=document.createElement("select");d.className="selector_selected",d.options.add(new Option("请选择","请选择")),a.appendChild(d);for(var e=0;e<g;e++){var f=new Option(c[e].label,c[e].menuId);d.options.add(f)}d.onchange=function(){if(d.selectedIndex>0){var e=c[d.selectedIndex-1],f=c.slice(0,d.selectedIndex-1),h=c.slice(d.selectedIndex,g);c=f.concat(h),b.push(new ManagerMenuEntity("",e.menuId,e.label)),initWidgetSelector(a,b,c)}}}()}function showMessageView(){resetView();var a=document.getElementById(MAIN_TITLE_ID),b=document.createElement("div");b.innerHTML="用户列表",b.className="horizontalSelected",b.style.width="100%",a.appendChild(b),requestMessage()}function requestMessage(){onRequestMessageDataCallback(null)}function onRequestMessageDataCallback(a){initMessageEntitiesContainerView()}function initMessageEntitiesContainerView(a){var b=document.getElementById(MAIN_CONTENT_ID),c=createSearchWidget(function(a){console.log(a)});b.appendChild(c);var d=document.createElement("div");d.className="SS_IC",d.style.width="100%",d.style.height="40px",d.appendChild(createPublishMessageView());for(var e=3,f=0;f<e;f++){var g=document.createElement("div");g.className="SS_IC",g.style.width="100%",g.style.height="40px",g.style.borderWidth="0px";var h=document.createElement("hr");h.className="SS_IC_HL",g.appendChild(h);var i=document.createElement("div");i.className="SS_IC_LABEL",i.style.borderWidth="1px",i.style.paddingLeft="10px",i.style.width="1033px",i.style.cursor="default",i.style.textAlign="left",i.innerHTML="2016-07-08 13:34:12 系统发布消息：春节到了，特惠大酬宾，敬请关注。<span style='color:red'>1234</span>人已读",g.appendChild(i),d.appendChild(g)}d.style.height=40*(e+1)+"px",b.appendChild(d)}function createPublishMessageView(){var a=document.createElement("div");a.className="SS_IC",a.style.width="100%",a.style.height="40px",a.style.borderWidth="0px";var b=document.createElement("hr");b.className="SS_IC_HL",a.appendChild(b);var c=document.createElement("div");return c.className="SS_IC",c.style.borderWidth="0px",c.style.width="1043px",createConvertView(c,!0,0),a.appendChild(c),a}function createConvertView(a,b,c){if(a.innerHTML=null,b){var d=document.createElement("div");d.className="SS_IC_LABEL",d.style.width=1043+c+"px",d.style.height="30px",d.style.lineHeight="30px",d.style.textAlign="center",d.style.borderWidth="1px",d.innerHTML="+",d.onclick=function(){createConvertView(a,!1,c)},a.appendChild(d)}else{var e=document.createElement("input");e.className="SS_IC_LABEL",e.style.width=899+c+"px",e.style.height="28px",e.style.lineHeight="28px",e.style.borderWidth="1px",a.appendChild(e),e.focus();var f=document.createElement("div");f.className="B_B_D",f.style.height="31px",f.style.lineHeight="30px",f.innerHTML="取消",f.onclick=function(){console.log("cancelView"),createConvertView(a,!0,c)},a.appendChild(f);var g=document.createElement("div");g.className="B_B_D",g.style.height="31px",g.style.lineHeight="30px",g.innerHTML="发布",g.onclick=function(){console.log("publishView"),createConvertView(a,!0,c)},a.appendChild(g)}}function showOrderView(){resetView();var a=document.getElementById(MAIN_TITLE_ID);createOrderTitleTab(a,ORDER_TABS,0,function(a){0==a?onUnExpressTabCallback():1==a?onExpressingTabCallback():2==a?onExpressedTabCallback():3==a&&onAllTabCallback()})}function createOrderTitleTab(a,b,c,d){a.innerHTML=null;for(var e=function(e){var f=b[e],g=document.createElement("div");g.className=f.className,g.style.width="270px",g.style.height="100%",g.innerHTML=f,e==c?(g.className="horizontalSelected",d(e)):g.className="horizontalNormal",g.onclick=function(){createOrderTitleTab(a,b,e,d)},a.appendChild(g)},f=0;f<b.length;f++)e(f)}function onUnExpressTabCallback(){var a=BASE_PATH+"/order/mRetrieveUnExpress";asyncRequestByGet(a,function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);createUnExpressView(c.data)}},onErrorCallback,onTimeoutCallback)}function onExpressingTabCallback(){var a=BASE_PATH+"/order/mRetrieveExpressing";asyncRequestByGet(a,function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);createExpressingView(c.data)}},onErrorCallback,onTimeoutCallback)}function onExpressedTabCallback(){var a=BASE_PATH+"/order/mRetrieveExpressed";asyncRequestByGet(a,function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);createExpressedView(c.data)}},onErrorCallback,onTimeoutCallback)}function onAllTabCallback(){var a=BASE_PATH+"/order/mRetrieveAll";asyncRequestByGet(a,function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);createAllView(c.data)}},onErrorCallback,onTimeoutCallback)}function createUnExpressView(a){var b=document.getElementById(MAIN_CONTENT_ID);b.innerHTML=null;var c=createUnExpressTitleContainer();b.appendChild(c);for(var d=void 0==a?0:a.length,e=0;e<d;e++){var f=document.createElement("div");f.className="orderItemMainBlock",f.style.borderRightWidth="0px",attachUnExpressView(a[e],f,!1);var g=createOrderContainer(a[e],"40%","30%","29%",f);b.appendChild(g)}}function createUnExpressTitleContainer(){var a=document.createElement("div");a.className="orderExpressTitle";var b=document.createElement("div");b.className="actionButton",b.style.width="15%",b.innerHTML="导出发货信息",a.appendChild(b);var c=document.createElement("div");c.className="actionButton",c.style.width="15%",c.style.marginLeft="1%",c.innerHTML="导入发货信息",a.appendChild(c);var d=createSearchWidget("68%",function(a){console.log(a)});return d.style["float"]="left",d.style.marginLeft="1%",a.appendChild(d),a}function attachUnExpressView(a,b,c){if(b.innerHTML=null,c)!function(){var c=document.createElement("select");c.className="SS_IC_LABEL",c.style.marginTop="5px",c.style.width="100%",c.style.textAlign="center",b.appendChild(c);var d=document.createElement("input");d.className="SS_IC_LABEL",d.style.marginTop="5px",d.style.width="99%",b.appendChild(d);var e=document.createElement("div");e.className="B_B_D",e.style.width="110px",e.style.marginTop="5px",e.innerHTML="取消发货",e.onclick=function(){attachUnExpressView(a,b,!1)},b.appendChild(e);var f=document.createElement("div");f.className="B_B_D",f.style.width="110px",f.style.marginTop="5px",f.innerHTML="确定发货",b.appendChild(f),f.onclick=function(){var b=new Object;b.orderId=a.orderId,b.expressLabel="顺丰快递",b.expressNumber=d.value,b.status=2,requestExpress(b)}}();else{var d=document.createElement("div");d.className="actionButton",d.style.width="90%",d.style.height="30%",d.style.marginTop="2px",d.innerHTML="去发货",d.onclick=function(){attachUnExpressView(a,b,!0)},b.appendChild(d)}}function createExpressingView(a){var b=document.getElementById(MAIN_CONTENT_ID);b.innerHTML=null;for(var c=void 0==a?0:a.length,d=0;d<c;d++){var e=document.createElement("div");e.className="orderItemMainBlock",e.style.borderRightWidth="0px",attachExpressingStatusView(a[d],e,!1);var f=createOrderContainer(a[d],"40%","30%","29%",e);b.appendChild(f)}}function attachExpressingStatusView(a,b){b.innerHTML=a.expressLabel+" "+a.expressNumber}function createExpressedView(a){var b=document.getElementById(MAIN_CONTENT_ID);b.innerHTML=null;for(var c=void 0==a?0:a.length,d=0;d<c;d++){var e=document.createElement("div");e.className="orderItemMainBlock",e.style.borderRightWidth="0px",attachExpressingStatusView(a[d],e,!1);var f=createOrderContainer(a[d],"40%","30%","29%",e);b.appendChild(f)}}function createAllView(a){var b=document.getElementById(MAIN_CONTENT_ID);b.innerHTML=null;for(var c=void 0==a?0:a.length,d=0;d<c;d++){var e=a[d],f=document.createElement("div");f.className="orderItemMainBlock",f.style.borderRightWidth="0px",1==e.status||attachExpressingStatusView(a[d],f,!1);var g=createOrderContainer(a[d],"40%","30%","29%",f);b.appendChild(g)}}function createOrderContainer(a,b,c,d,e){var f=document.createElement("div");f.className="orderItemContainer";var g=document.createElement("div");g.className="orderItemTitle",g.innerHTML=new Date(a.createTime).format("yyyy-MM-dd hh:mm")+"  订单号: "+a.orderId+"  收货人：地球往事    电话：123 4567 78900",f.appendChild(g);var h=document.createElement("div");h.className="orderItemMain";var i=document.createElement("div");i.className="orderItemMainBlock",i.style.width=b;for(var j=void 0==a?0:void 0==a.formatEntities?0:a.formatEntities.length,k=0;k<j;k++){var l=a.formatEntities[k],m=document.createElement("div");m.className="orderItemMainProductItem";var n=document.createElement("div");n.className="orderItemMainProductItemLabel",n.style.width="85%",n.innerHTML=l.parent.parent.label+" "+l.parent.label+" "+l.label+l.meta,m.appendChild(n);var o=document.createElement("div");o.className="orderItemMainProductItemLabel",o.style.width="15%",o.innerHTML="x 5",m.appendChild(o),i.appendChild(m)}h.style.height=31*j+"px",f.style.height=40+31*j+"px",h.appendChild(i);var p=document.createElement("div");return p.className="orderItemMainBlock",p.style.width=c,p.style.textAlign="center",p.innerHTML="北京 北京市 昌平区 回龙观 新龙城小区二期380号院 36A 8单元 9008",h.appendChild(p),void 0!=e&&(e.style.width=d,h.appendChild(e)),f.appendChild(h),f}function requestExpress(a){console.log(a);var b=BASE_PATH+"/order/mUpdateExpress?p="+JSON.stringify(a);asyncRequestByGet(b,function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);c.code==RESPONSE_SUCCESS?showOrderView():(new Toast).show("发货失败")}},onErrorCallback,onTimeoutCallback)}function posterInit(){var a=BASE_PATH+"/poster/";asyncRequestByGet(a,function(a){onPosterDataCallback(a)},onRequestError(),onRequestTimeout())}function updatePoster(a,b,c,d,e,f){var g=BASE_PATH+"/poster/update?posterId="+a+"&status="+b+"&clickable="+c+"&href="+d+"&start="+e+"&end="+f;asyncRequestByGet(g,function(a){onUpdateDataCallback(a)},onRequestError(),onRequestTimeout())}function onPosterDataCallback(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);initPosterView(c.data)}}function onUpdateDataCallback(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);200==c.code?(new Toast).show("保存成功"):(new Toast).show("保存失败")}}function initPosterView(a){resetView();var b=document.getElementById(MAIN_TITLE_ID),c=document.getElementById(MAIN_CONTENT_ID),d=document.createElement("div");d.innerHTML="海报管理",d.className="horizontalSelected",d.style.width="100%",b.appendChild(d);var e=document.createElement("div");e.style.width="100%",e.style.height="30px";var f=document.createElement("input");f.setAttribute("type","checkbox"),f.className="formatDisplayCheckBox",f.style.marginLeft="10px",f.style.cursor="pointer",0==a.status?f.checked=!1:1==a.status&&(f.checked=!0),e.appendChild(f);var g=document.createElement("div");g.style["float"]="left",g.style.height="28px",g.style.lineHeight="30px",g.style.fontSize="14px",g.innerHTML="是否显示&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;从",e.appendChild(g);var h=document.createElement("input");h.className="posterItemContainer",h.readOnly=!0,h.style.paddingLeft="10px",h.style.margin="0px",h.style.width="245px",h.style.height="28px",h.style.lineHeight="30px",h.style.fontSize="14px",h.style.borderWidth="1px",new Pikaday({field:h,firstDay:1,minDate:new Date("2015-01-01"),maxDate:new Date("2020-12-31"),yearRange:[2015,2020]}),void 0!=a.start&&(h.value=a.start),e.appendChild(h);var i=document.createElement("div");i.style["float"]="left",i.style.width="15px",i.style.height="28px",i.style.lineHeight="30px",i.style.fontSize="14px",i.innerHTML="到",e.appendChild(i);var j=document.createElement("input");j.className="posterItemContainer",j.readOnly=!0,j.style.paddingLeft="10px",j.style.margin="0px",j.style.width="245px",j.style.height="28px",j.style.lineHeight="30px",j.style.fontSize="14px",j.style.borderWidth="1px",new Pikaday({field:j,firstDay:1,minDate:new Date("2015-01-01"),maxDate:new Date("2020-12-31"),yearRange:[2015,2020]}),void 0!=a.end&&(j.value=a.end),e.appendChild(j);var k=document.createElement("div");k.style["float"]="left",k.style.width="60px",k.style.height="28px",k.style.lineHeight="30px",k.style.fontSize="14px",k.innerHTML="显示海报",e.appendChild(k);var l=document.createElement("div");l.className="B_B_D",l.style["float"]="right",l.style.marginRight="15px",l.innerHTML="保存",l.onclick=function(){(f.checked?1:0==a.status&&a.start==h.value&&a.end==j.value)?(new Toast).show("无需保存"):updatePoster(a.posterId,f.checked?1:0,0,"",h.value,j.value)},e.appendChild(l),c.appendChild(e);var m=document.createElement("div");m.style.width="100%";for(var n=void 0==a.children?0:a.children.length,o=0;o<n;o++){if(o%2==0){var p=document.createElement("div");p.className="clearFloat",m.appendChild(p)}createPosterItemWidget(m,a.children[o])}createAddNewPosterWidget(m,a),c.appendChild(m)}function createPosterItemWidget(a,b){var c=document.createElement("div");c.className="posterItemContainer";var d=document.createElement("img");d.className="posterSnap",c.appendChild(d);var e=document.createElement("div");e.className="posterButtonContainer";var f=document.createElement("div");f.className="posterButton",f.innerHTML="显示",e.appendChild(f);var g=document.createElement("hr");g.className="posterButtonHL",e.appendChild(g);var h=document.createElement("div");h.className="posterButton",h.innerHTML="可点击",e.appendChild(h);var i=document.createElement("hr");i.className="posterButtonHL",e.appendChild(i);var j=document.createElement("div");j.className="posterButton",j.innerHTML="删除",e.appendChild(j);var k=document.createElement("hr");k.className="posterButtonHL",e.appendChild(k);var l=document.createElement("div");l.className="posterButton",l.innerHTML="编辑",l.onclick=function(){posterEditor(b,!1)},e.appendChild(l),c.appendChild(e),a.appendChild(c)}function createAddNewPosterWidget(a,b){var c=document.createElement("div");c.className="posterItemContainer",c.style.backgroundColor="#169BD5",c.style.color="#FFFFFF",c.style.fontSize="200px",c.style.height="323px",c.style.lineHeight="323px",c.style.cursor="pointer",c.innerHTML="+",c.onclick=function(){posterEditor(b,!0)},a.appendChild(c)}function posterEditor(a,b){initPosterEditorView(a,b)}function createPoster(a,b,c,d){var e=BASE_PATH+"/poster/create?pid="+a+"&status="+b+"&clickable="+c+"&href="+d;asyncRequestByGet(e,function(a){onCreateDataCallback(a)},onRequestError(),onRequestTimeout())}function onCreateDataCallback(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);200==c.code?((new Toast).show("保存成功"),poster()):(new Toast).show("保存失败")}}function initPosterEditorView(a,b){resetView();var c=document.getElementById(MAIN_TITLE_ID),d=document.getElementById(MAIN_CONTENT_ID),e=document.createElement("div");e.innerHTML="海报编辑",e.className="horizontalSelected",e.style.width="100%",e.style.cursor="pointer",c.appendChild(e),c.style.cursor="pointer",c.onclick=function(){a(),c.onclick=null,c.style.cursor="default"};var f=document.createElement("div");f.className="editorBlockView",f.style.height="440px",f.style.borderWidth="1px",f.style.cursor="pointer",d.appendChild(f);var g=document.createElement("div");g.className="editorBlockView";var h=document.createElement("input");h.setAttribute("type","checkbox"),h.className="formatDisplayCheckBox",b||(0==a.status?h.checked=!1:1==a.status&&(h.checked=!0)),g.appendChild(h);var i=document.createElement("div");i.style["float"]="left",i.style.height="28px",i.style.lineHeight="28px",i.style.fontSize="14px",
i.innerHTML="是否显示",g.appendChild(i),d.appendChild(g);var j=document.createElement("div");j.className="editorBlockView";var k=document.createElement("input");k.setAttribute("type","checkbox"),k.className="formatDisplayCheckBox",b||(0==a.status?k.checked=!1:1==a.status&&(k.checked=!0)),j.appendChild(k);var l=document.createElement("div");l.style["float"]="left",l.style.height="28px",l.style.lineHeight="28px",l.style.fontSize="14px",l.innerHTML="是否可点击",j.appendChild(l),d.appendChild(j);var m=document.createElement("div");m.style["float"]="left",m.style.height="28px",m.style.lineHeight="28px",m.style.fontSize="14px",m.style.marginLeft="20px",m.innerHTML="链接地址",j.appendChild(m);var n=document.createElement("input");n.className="SS_IC_LABEL",n.style.width="886px",n.style.height="28px",n.style.borderLeftWidth="1px",n.style.marginLeft="10px",b||(n.value=a.href),j.appendChild(n),d.appendChild(j);var o=document.createElement("div");o.className="editorBlockView",o.style.marginTop="15px";var p=document.createElement("div");p.className="B_B_D",p.style.marginLeft="0px",p.style.width="532px",p.innerHTML="取消",p.onclick=function(){posterInit(),c.onclick=null,c.style.cursor="default"},o.appendChild(p);var q=document.createElement("hr");q.className="posterButtonHL",o.appendChild(q);var r=document.createElement("div");r.className="B_B_D",r.style.marginLeft="0px",r.style.width="532px",b?(r.innerHTML="提交",r.onclick=function(){createPoster(a.posterId,h.checked?1:0,k.checked?1:0,n.value)}):(r.innerHTML="保存",r.onclick=function(){updatePoster(a.posterId,h.checked?1:0,k.checked?1:0,n.value)}),o.appendChild(r),d.appendChild(o)}function initProduct(){resetView(),initProductSeries(void 0)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function initProductFormat(a,b){resetView();var c=document.getElementById(MAIN_TITLE_ID),d=document.createElement("div");d.innerHTML="系列总览 >> "+a.label+" >> "+b.label,d.className="horizontalSelected",d.style.width="100%",d.style.cursor="cursor",c.appendChild(d),c.onclick=function(){initProductType(a)},createMixContainer(b),requestFormatListData(b)}function requestFormatListData(a){var b=BASE_PATH+"/format/mRetrieves?p="+JSON.stringify(a);asyncRequestByGet(b,function(b){var c=checkResponseDataFormat(b);if(c){var d=JSON.parse(b);d.code==RESPONSE_SUCCESS?onRequestFormatListDataCallback(a,d.data):(new Toast).show("请求数据失败")}},onRequestError(),onRequestTimeout())}function onRequestFormatListDataCallback(a,b){var c=document.getElementById("formatContainer");c.innerHTML=null;var d=document.createElement("div");d.className="formatItemContainer",d.style.height="45px",d.style.marginTop="0px",c.appendChild(d);var e=document.createElement("div");e.className="formatItemContainer",c.appendChild(e);var f=document.createElement("div");f.className="formatItemContainer",c.appendChild(f);var g=document.createElement("div");g.className="formatItemContainer",c.appendChild(g);var h=document.createElement("div");h.className="formatItemContainer",c.appendChild(h);var i=document.createElement("div");i.className="formatItemContainer",i.style.height="96px",c.appendChild(i),attachFormatTitleContainer(d,b,0,function(b){null!=b&&b.tag==APP_CONST_CLIENT_ID&&(b=void 0),attachFormatBaseInfoContainer(e,a,b),attachFormatDiscountContainer(f,b),attachFormatPostageContainer(g,b),attachFormatGiftContainer(h,b),attachFormatFunctionContainer(i,a,b)})}function attachFormatTitleContainer(a,b,c,d){a.innerHTML=null;for(var e=a.clientWidth,f=void 0==b?0:b.length,g=(e-2*(f+1))/(f+1)+"px",h=function(e){var h=document.createElement("div");h.style.width=g;var i=void 0;e<f?(i=b[e],i.tag==APP_CONST_CLIENT_ID?h.innerHTML="新规格":(h.innerHTML=i.label,0==i.status&&(h.style.color="red"))):(h.tag="addNewFormat",h.innerHTML="+"),e==c?(h.className="HTabSelected",d(i)):h.className="HTabNormal",a.appendChild(h),h.onclick=function(){if("addNewFormat"==h.tag)if(b[f-1].tag==APP_CONST_CLIENT_ID)(new Toast).show("请先保存新规格");else{var c=new Object;c.tag=APP_CONST_CLIENT_ID,b.push(c),attachFormatTitleContainer(a,b,e,d)}else attachFormatTitleContainer(a,b,e,d)}},i=0;i<f+1;i++)h(i)}function attachFormatBaseInfoContainer(a,b,c){a.innerHTML=null;var d=document.createElement("div");d.className="formatFunctionLeftContainer";var e=document.createElement("input");e.setAttribute("type","checkbox"),e.className="formatDisplayCheckBox",e.id="formatStatus",void 0==c?e.checked=!1:0==c.status?e.checked=!1:1==c.status&&(e.checked=!0),d.appendChild(e);var f=new FormatBaseViewInfo("规格","formatLabel",void 0==c?"":c.label,"formatLabelUnit",void 0==c?"":c.meta,(!0)),g=new FormatBaseViewInfo("数量","formatMount",void 0==c?"":c.amount,"formatMountUnit",void 0==c?"":c.amountMeta,(!0)),h=new FormatBaseViewInfo("定价","formatPrice",void 0==c?"":c.price,"formatPriceUnit",void 0==c?"":c.priceMeta,(!0)),i=new FormatBaseViewInfo("邮费","formatPostage",void 0==c?"":c.postage,"formatPostageUnit",void 0==c?"":c.postageMeta,(!0)),j=new Array;j.push(f),j.push(g),j.push(h),j.push(i);var k=new Array;k.push(void 0==c?void 0:c.meta),k.push(void 0==c?void 0:c.amountMeta),k.push(void 0==c?void 0:c.priceMeta),k.push(void 0==c?void 0:c.postageMeta);for(var l=0;l<4;l++)createInputSelectWidget(d,j[l],k[l]);a.appendChild(d);var m=document.createElement("div");m.className="formatFunctionRightContainer";var n=document.createElement("div");n.className="formatDeleteView",n.innerHTML="删除",m.appendChild(n),a.appendChild(m),n.onclick=function(){var a=new Object;a.typeId=b.typeId,a.formatId=c.formatId,a.status=-1,requestMarkFormat(b,a)}}function attachFormatDiscountContainer(a,b){a.innerHTML=null;var c=document.createElement("input");c.setAttribute("type","checkbox"),c.className="formatDisplayCheckBox",c.id="formatPricingStatus",void 0==b?c.checked=!1:0==b.pricingStatus?c.checked=!1:1==b.pricingStatus&&(c.checked=!0),a.appendChild(c);var d=new FormatBaseViewInfo("折扣","formatPricingDiscount",void 0==b?"":b.pricingDiscount,"spaceholder",void 0==b?"":b.meta,(!1)),e=new FormatBaseViewInfo("现价","formatPricing",void 0==b?"":b.pricing,"spaceholder",void 0==b?"":b.meta,(!1)),f=new Array;f.push(d),f.push(e);for(var g=0;g<2;g++)createInputSelectWidget(a,f[g]);createFormatDatePickerWidget(a,"formatDiscountStartTime",void 0==b?void 0:b.pricingStart),createFormatDatePickerWidget(a,"formatDiscountEndTime",void 0==b?void 0:b.pricingEnd)}function attachFormatPostageContainer(a,b){a.innerHTML=null;var c=document.createElement("input");c.setAttribute("type","checkbox"),c.className="formatDisplayCheckBox",c.id="formatExpressStatus",void 0==b?c.checked=!1:0==b.expressStatus?c.checked=!1:1==b.expressStatus&&(c.checked=!0),a.appendChild(c);var d=new FormatBaseViewInfo("包邮","formatExpressCount",void 0==b?"":b.expressCount,"spaceholder",void 0==b?"":b.meta,(!1));createInputSelectWidget(a,d),createFormatSelectWidget(a,"formatExpress",EXPRESS,void 0==b?void 0:b.expressName,"请选择快递公司"),createFormatDatePickerWidget(a,"formatExpressStartTime",void 0==b?void 0:b.expressStart),createFormatDatePickerWidget(a,"formatExpressEndTime",void 0==b?void 0:b.expressEnd)}function attachFormatGiftContainer(a,b){a.innerHTML=null;var c=document.createElement("input");c.setAttribute("type","checkbox"),c.className="formatDisplayCheckBox",c.id="formatGiftStatus",void 0==b?c.checked=!1:0==b.giftStatus?c.checked=!1:1==b.giftStatus&&(c.checked=!0),a.appendChild(c);var d=new FormatBaseViewInfo("满赠","formatGiftCount",void 0==b?"":b.giftCount,"spaceholder",void 0==b?"":b.meta,(!1));createInputSelectWidget(a,d),createFormatSelectWidget(a,"formatGift",["giftProduct1","giftProduct2"],void 0==b?"":b.giftLabel,"请选择赠送产品"),createFormatDatePickerWidget(a,"formatGiftStartTime",void 0==b?void 0:b.giftStart),createFormatDatePickerWidget(a,"formatGiftEndTime",void 0==b?void 0:b.giftEnd)}function attachFormatFunctionContainer(a,b,c){a.innerHTML=null;var d=document.createElement("div");d.className="formatFunctionLeftContainer",a.appendChild(d);var e=document.createElement("div");e.className="formatFunctionRightContainer";var f=document.createElement("div");f.className="formatAction",f.innerHTML="保存",e.appendChild(f),a.appendChild(e),f.onclick=function(){saveFormat(b,c)}}function createInputSelectWidget(a,b,c){var d=document.createElement("div");d.innerHTML=b.title,d.className="formatLabel",d.style.marginLeft="5px",a.appendChild(d);var e=document.createElement("input");if(e.className="formatInput",e.value=b.label,e.id=b.labelId,a.appendChild(e),b.isSelector){var f=document.createElement("select");f.value=b.unit,f.id=b.unitId,f.className="formatSelect",void 0==c?f.options.add(new Option("单位","单位")):f.options.add(new Option(c,"current"));for(var g=0;g<UNITS.length;g++)f.options.add(new Option(UNITS[g].label,UNITS[g].unitId));a.appendChild(f)}}function createFormatSelectWidget(a,b,c,d,e){var f=document.createElement("select");if(f.id=b,f.className="formatSelect",f.style.width="200px",f.style.marginLeft="10px",void 0!=c){void 0==d?f.options.add(new Option(e,e)):f.options.add(new Option(d,"current"));for(var g=0;g<c.length;g++)f.options.add(new Option(c[g],c[g]))}a.appendChild(f)}function createFormatDatePickerWidget(a,b,c){var d=document.createElement("input");d.type="text",void 0==c?d.value="请选择时间":d.value=new Date(c).format("yyyy-MM-dd"),d.readOnly=!0,d.className="formatInput",d.style.width="200px",d.style.marginLeft="10px",d.id=b,a.appendChild(d),new Pikaday({field:d,firstDay:1,minDate:new Date("2015-01-01"),maxDate:new Date("2020-12-31"),yearRange:[2015,2020]})}function saveFormat(a,b){var c=document.getElementById("formatStatus"),d=document.getElementById("formatLabel"),e=document.getElementById("formatLabelUnit"),f=document.getElementById("formatMount"),g=document.getElementById("formatMountUnit"),h=document.getElementById("formatPrice"),i=document.getElementById("formatPriceUnit"),j=document.getElementById("formatPostage"),k=document.getElementById("formatPostageUnit"),l=document.getElementById("formatPricingStatus"),m=document.getElementById("formatPricingDiscount"),n=document.getElementById("formatPricing"),o=document.getElementById("formatDiscountStartTime"),p=document.getElementById("formatDiscountEndTime"),q=document.getElementById("formatExpressStatus"),r=document.getElementById("formatExpressCount"),s=document.getElementById("formatExpress"),t=document.getElementById("formatExpressStartTime"),u=document.getElementById("formatExpressEndTime"),v=document.getElementById("formatGiftStatus"),w=document.getElementById("formatGiftCount"),x=document.getElementById("formatGift"),y=document.getElementById("formatGiftStartTime"),z=document.getElementById("formatGiftEndTime"),A=new Object;A.typeId=a.typeId,A.status=1==c.checked?1:0,A.label=d.value,A.meta=e.options[e.selectedIndex].text,A.amount=f.value,A.amountMeta=g.options[g.selectedIndex].text,A.price=h.value,A.priceMeta=i.options[i.selectedIndex].text,A.postage=j.value,A.postageMeta=k.options[k.selectedIndex].text,A.pricingStatus=1==l.checked?1:0,A.pricingDiscount=m.value,A.pricing=n.value,A.pricingStart=new Date(o.value).getTime(),A.pricingEnd=new Date(p.value).getTime(),A.expressStatus=1==q.checked?1:0,A.expressCount=r.value,A.expressName=s.options[s.selectedIndex].text,A.expressStart=new Date(t.value).getTime(),A.expressEnd=new Date(u.value).getTime(),A.giftStatus=1==v.checked?1:0,A.giftCount=w.value,A.giftLabel=x.options[x.selectedIndex].text,A.giftStart=new Date(y.value).getTime(),A.giftEnd=new Date(z.value).getTime(),void 0==b||void 0==b.formatId||null==b.formatId||b.formatId==APP_CONST_CLIENT_ID?requestCreateFormat(a,A):(A.formatId=b.formatId,requestUpdateFormat(a,A))}function requestCreateFormat(a,b){var c=BASE_PATH+"/format/mCreate?p="+JSON.stringify(b);asyncRequestByGet(c,function(b){var c=checkResponseDataFormat(b);if(c){var d=JSON.parse(b);d.code==RESPONSE_SUCCESS?((new Toast).show("保存成功"),requestFormatListData(a)):(new Toast).show("保存失败")}},onRequestError(),onRequestTimeout())}function requestUpdateFormat(a,b){var c=BASE_PATH+"/format/mUpdate?p="+JSON.stringify(b);asyncRequestByGet(c,function(b){var c=checkResponseDataFormat(b);if(c){var d=JSON.parse(b);d.code==RESPONSE_SUCCESS?((new Toast).show("保存成功"),requestFormatListData(a)):(new Toast).show("保存失败")}},onRequestError(),onRequestTimeout())}function requestMarkFormat(a,b){var c=BASE_PATH+"/format/mMark?p="+JSON.stringify(b);asyncRequestByGet(c,function(b){var c=checkResponseDataFormat(b);if(c){var d=JSON.parse(b);d.code==RESPONSE_SUCCESS?((new Toast).show("保存成功"),requestFormatListData(a)):(new Toast).show("保存失败")}},onRequestError(),onRequestTimeout())}function initProductSeries(a){resetView();var b=document.getElementById(MAIN_TITLE_ID),c=document.createElement("div");c.innerHTML="系列总览",c.className="horizontalSelected",c.style.width="100%",b.appendChild(c),requestSeriesListData(a)}function requestSeriesListData(a){var b=new Object;b.sessionId="admin";var c=BASE_PATH+"/series/mRetrieves?p="+JSON.stringify(b);asyncRequestByGet(c,function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);c.code==RESPONSE_SUCCESS?onRequestSeriesListDataCallback(c.data):(new Toast).show("请求数据失败")}},onRequestError(),onRequestTimeout())}function onRequestSeriesListDataCallback(a){var b=document.getElementById(MAIN_CONTENT_ID),c=document.createElement("div");c.className="productItemContainer";var d=document.createElement("div");d.className="productItemSubContainer",addNewSeriesToContainer(d),c.appendChild(d),b.appendChild(c);for(var e=void 0==a?0:a.length,f=0;f<e;f++){if(f+1==0){var g=document.createElement("div");g.className="clearFloat",b.appendChild(g)}b.appendChild(createSeriesContainer(a[f]))}}function addNewSeriesToContainer(a){a.innerHTML=null;var b=document.createElement("div");b.innerHTML="+",b.style.fontSize="150px",b.style.cursor="pointer",a.appendChild(b),b.onclick=function(){convertSeriesContainerToEditor(a,void 0)}}function createSeriesContainer(a){var b=document.createElement("div");b.className="productItemContainer";var c=document.createElement("div");return c.className="productItemSubContainer",0==a.status&&(c.style.borderColor="#FF0000"),addSeriesToContainer(c,a),b.appendChild(c),b}function addSeriesToContainer(a,b){a.innerHTML=null,a.style.cursor="pointer";var c=document.createElement("input");c.className="labelNameEditor",c.readOnly=!0,c.value=b.label,a.appendChild(c),c.onclick=function(){convertSeriesContainerToEditor(a,b)},a.onclick=function(){initProductType(b)}}function convertSeriesContainerToEditor(a,b){a.innerHTML=null,a.onclick=null,a.ondblclick=null,a.style.cursor="default";var c=document.createElement("input");c.className="labelNameEditor",c.style.cursor="text",a.appendChild(c);var d=document.createElement("div");if(d.className="actionBar",a.appendChild(d),void 0==b){c.placeholder="请输入产品系列名称",c.focus();var e=document.createElement("div");e.className="actionButton",e.style.width="48%",e.innerHTML="取消",d.appendChild(e);var f=document.createElement("div");f.className="actionButton",f.style.width="48%",f.innerHTML="保存",d.appendChild(f),e.onclick=function(){addNewSeriesToContainer(a)},f.onclick=function(){var a=c.value;if(void 0==a||null==a||""==a)(new Toast).show("系列名称不能为空");else{var b=new Object;b.sessionId="admin",b.label=a,requestCreateSeries(b)}}}else{c.value=b.label,c.focus();var g=document.createElement("div");g.className="actionButton",g.innerHTML="返回",d.appendChild(g);var h=document.createElement("div");h.className="actionButton",h.innerHTML="保存",d.appendChild(h);var i=document.createElement("div");i.className="actionButton",0==b.status?i.innerHTML="启用":1==b.status&&(i.innerHTML="禁用"),d.appendChild(i);var j=document.createElement("div");j.className="actionButton",j.innerHTML="删除",d.appendChild(j),g.onclick=function(){addSeriesToContainer(a,b)},h.onclick=function(){var a=c.value;if(void 0==a||null==a||""==a)(new Toast).show("系列名称不能为空");else if(a==b.label)(new Toast).show("系列名称没有变化,无需更改");else{var d=new Object;d.sessionId="admin",d.seriesId=b.seriesId,d.label=a,requestRenameSeries(d)}},i.onclick=function(){var a=new Object;a.sessionId="admin",a.seriesId=b.seriesId,0==b.status?a.status=1:1==b.status&&(a.status=0),requestMarkSeries(a)},j.onclick=function(){var a=new Object;a.sessionId="admin",a.seriesId=b.seriesId,a.status=-1,requestMarkSeries(a)}}}function requestCreateSeries(a){var b=BASE_PATH+"/series/mCreate?p="+JSON.stringify(a);asyncRequestByGet(b,function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);c.code==RESPONSE_SUCCESS?((new Toast).show("创建成功"),initProductSeries(void 0)):(new Toast).show("更新失败")}},onRequestError(),onRequestTimeout())}function requestRenameSeries(a){var b=BASE_PATH+"/series/mUpdate?p="+JSON.stringify(a);asyncRequestByGet(b,function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);c.code==RESPONSE_SUCCESS?((new Toast).show("更新成功"),initProductSeries(void 0)):(new Toast).show("更新失败")}},onRequestError(),onRequestTimeout())}function requestMarkSeries(a){var b=BASE_PATH+"/series/mMark?p="+JSON.stringify(a);asyncRequestByGet(b,function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);c.code==RESPONSE_SUCCESS?((new Toast).show("操作成功"),initProductSeries(void 0)):(new Toast).show("操作失败")}},onRequestError(),onRequestTimeout())}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function initProductType(a){resetView();var b=document.getElementById(MAIN_TITLE_ID),c=document.createElement("div");c.innerHTML="系列总览 >> "+a.label,c.className="horizontalSelected",c.style.width="100%",c.style.cursor="cursor",b.appendChild(c),b.onclick=function(){initProductSeries(void 0)},requestTypeListData(a)}function requestTypeListData(a){var b=BASE_PATH+"/type/mRetrieves?p="+JSON.stringify(a);asyncRequestByGet(b,function(b){var c=checkResponseDataFormat(b);if(c){var d=JSON.parse(b);d.code==RESPONSE_SUCCESS?onRequestTypeListDataCallback(a,d.data):(new Toast).show("请求数据失败")}},onRequestError(),onRequestTimeout())}function onRequestTypeListDataCallback(a,b){var c=document.getElementById(MAIN_CONTENT_ID);c.innerHTML=null;var d=document.createElement("div");d.className="productItemContainer";var e=document.createElement("div");e.className="productItemSubContainer",addNewTypeToContainer(e,a),d.appendChild(e),c.appendChild(d);for(var f=void 0==b?0:b.length,g=0;g<f;g++){if(g+1==0){var h=document.createElement("div");h.className="clearFloat",c.appendChild(h)}c.appendChild(createTypeContainer(a,b[g]))}}function addNewTypeToContainer(a,b){a.innerHTML=null;var c=document.createElement("div");c.innerHTML="+",c.style.fontSize="150px",c.style.cursor="pointer",a.appendChild(c),c.onclick=function(){convertTypeContainerToEditor(a,b,void 0)}}function createTypeContainer(a,b){var c=document.createElement("div");c.className="productItemContainer";var d=document.createElement("div");return d.className="productItemSubContainer",0==b.status&&(d.style.borderColor="#FF0000"),addTypeToContainer(d,a,b),c.appendChild(d),c}function addTypeToContainer(a,b,c){a.innerHTML=null,a.style.cursor="pointer";var d=document.createElement("input");d.className="labelNameEditor",d.readOnly=!0,d.value=c.label,a.appendChild(d),d.onclick=function(){convertTypeContainerToEditor(a,b,c)},a.onclick=function(){initProductFormat(b,c)}}function convertTypeContainerToEditor(a,b,c){a.innerHTML=null,a.onclick=null,a.ondblclick=null,a.style.cursor="default";var d=document.createElement("input");d.className="labelNameEditor",d.style.cursor="text",a.appendChild(d);var e=document.createElement("div");if(e.className="actionBar",a.appendChild(e),void 0==c){d.placeholder="请输入产品类型名称",d.focus();var f=document.createElement("div");f.className="actionButton",f.style.width="48%",f.innerHTML="取消",e.appendChild(f);var g=document.createElement("div");g.className="actionButton",g.style.width="48%",g.innerHTML="保存",e.appendChild(g),f.onclick=function(){addNewTypeToContainer(a,b)},g.onclick=function(){var a=d.value;if(void 0==a||null==a||""==a)(new Toast).show("类型名称不能为空");else{var c=new Object;c.sessionId="admin",c.seriesId=b.seriesId,c.label=a,requestCreateType(b,c)}}}else{d.value=c.label,d.focus();var h=document.createElement("div");h.className="actionButton",h.innerHTML="返回",e.appendChild(h);var i=document.createElement("div");i.className="actionButton",i.innerHTML="保存",e.appendChild(i);var j=document.createElement("div");j.className="actionButton",0==c.status?j.innerHTML="启用":1==c.status&&(j.innerHTML="禁用"),e.appendChild(j);var k=document.createElement("div");k.className="actionButton",k.innerHTML="删除",e.appendChild(k),h.onclick=function(d){d.cancelBubble=!0,addTypeToContainer(a,b,c)},i.onclick=function(){var a=new Object;a.sessionId="admin",a.seriesId=b.seriesId,a.typeId=c.typeId,a.label=d.value,requestRenameType(b,a)},j.onclick=function(){var a=new Object;a.sessionId="admin",a.seriesId=b.seriesId,a.typeId=c.typeId,0==c.status?a.status=1:1==c.status&&(a.status=0),requestMarkType(b,a)},k.onclick=function(){var a=new Object;a.sessionId="admin",a.seriesId=b.seriesId,a.typeId=c.typeId,a.status=-1,requestMarkType(b,a)}}}function createMixContainer(a){var b=document.getElementById(MAIN_CONTENT_ID);b.innerHTML=null,b.appendChild(createTopContainer(a)),b.appendChild(createBottomContainer(a))}function createTopContainer(a){var b=document.createElement("div");return b.className="fillWidthContainer",b.appendChild(createTopLeftContainer(a)),b.appendChild(createTopRightContainer(a)),b}function createTopLeftContainer(a){var b=document.createElement("div");b.className="typeTopLeftContainer";var c=document.createElement("canvas");c.className="imageCuter",b.appendChild(c);var d=document.createElement("div");d.className="imageCuterSubmit",d.innerHTML="保存修改",b.appendChild(d);var e=document.createElement("div");e.className="fillWidthContainer",e.style.height="105px";var f=document.createElement("button");f.className="fileInput",f.innerHTML="添加图片";var g=document.createElement("button");g.className="fileInput",g.innerHTML="添加图片";var h=document.createElement("button");return h.className="fileInput",h.style.width="34%",h.innerHTML="添加图片",e.appendChild(f),e.appendChild(g),e.appendChild(h),b.appendChild(e),b}function createTopRightContainer(a){var b=document.createElement("div");return b.className="typeTopRightContainer",b.appendChild(createTypeSummaryContainer(a)),b.appendChild(createFormatContainer(a)),b}function createTypeSummaryContainer(a){var b=document.createElement("div");b.className="typeSummaryContainer";var c=document.createElement("textarea");c.id="typeSummary",c.value=void 0==a.summary?"":a.summary,c.className="typeSummary",b.appendChild(c);var d=document.createElement("div");return d.className="typeSummarySave",d.innerHTML="保存",d.onclick=function(){var b=new Object;b.sessionId="admin",b.typeId=a.typeId,b.summary=c.value,requestUpdateSummary(b)},b.appendChild(d),b}function createFormatContainer(){var a=document.createElement("div");return a.className="formatContainer",a.id="formatContainer",a}function createBottomContainer(a){var b=document.createElement("div");b.className="fillWidthContainer";var c=document.createElement("div"),d=new HyperEditorTool("H1","formatblock","H1","button"),e=new HyperEditorTool("H2","formatblock","H2","button"),f=new HyperEditorTool("H3","formatblock","H3","button"),g=new HyperEditorTool("H4","formatblock","H4","button"),h=new HyperEditorTool("H5","formatblock","H5","button"),i=new HyperEditorTool("H6","formatblock","H6","button"),j=new HyperEditorTool("居左","justifyleft",null,"button"),k=new HyperEditorTool("居中","justifycenter",null,"button"),l=new HyperEditorTool("居右","justifyright",null,"button"),m=new HyperEditorTool("左缩进","outdent",null,"button"),n=new HyperEditorTool("右缩进","indent",null,"button"),o=new HyperEditorTool("有序列","insertorderedlist",null,"button"),p=new HyperEditorTool("无序列","insertunorderedlist",null,"button"),q=new HyperEditorTool("链接","createlink",null,"button"),r=new HyperEditorTool("图片",null,null,"button"),s=new HyperEditorTool("图片","formatblock",null,"file"),t=new Array;t.push(d),t.push(e),t.push(f),t.push(g),t.push(h),t.push(i),t.push(j),t.push(k),t.push(l),t.push(m),t.push(n),t.push(o),t.push(p),t.push(q),t.push(r),t.push(s);for(var u=0;u<t.length;u++)createHyperToolWidget(c,t[u]);var v=document.createElement("div");v.className="hyperEditor",v.id="hyperEditor",v.contentEditable=!0,v.innerHTML=void 0==a.directions?"":a.directions,b.appendChild(c),b.appendChild(v);var w=document.createElement("div");return w.className="submitContainer",w.innerHTML="保存",w.onclick=function(){var b=new Object;b.sessionId="admin",b.typeId=a.typeId,b.directions=v.innerHTML,requestUpdateDirections(b)},b.appendChild(w),b}function createHyperToolWidget(a,b){var c=document.createElement("input");c.type=b.viewType,c.className="hyperEditorToolButton","file"==c.type?(c.accept="image/*",c.onchange=function(){var a=window.URL.createObjectURL(c.files.item(0));document.execCommand("insertImage",!1,a),document.getElementById("hyperEditor").focus()}):(c.value=b.label,c.onclick=format,c.cmd=b.invoke,c.param=b.param),a.appendChild(c)}function format(){if("createlink"==this.cmd){var a=prompt("请输入网络地址","http://");a&&""!=a&&"http://"!=a&&document.execCommand(this.cmd,!1,a)}else document.execCommand(this.cmd,!1,this.param),document.getElementById("hyperEditor").focus()}function requestCreateType(a,b){asyncRequestByGet(BASE_PATH+"/type/mCreate?p="+JSON.stringify(b),function(b){var c=checkResponseDataFormat(b);if(c){var d=JSON.parse(b);d.code==RESPONSE_SUCCESS?((new Toast).show("更新成功"),requestTypeListData(a)):(new Toast).show("更新失败")}},onRequestError(),onRequestTimeout())}function requestRenameType(a,b){asyncRequestByGet(BASE_PATH+"/type/mUpdate?p="+JSON.stringify(b),function(b){var c=checkResponseDataFormat(b);if(c){var d=JSON.parse(b);d.code==RESPONSE_SUCCESS?((new Toast).show("更新成功"),requestTypeListData(a)):(new Toast).show("更新失败")}},onRequestError(),onRequestTimeout())}function requestMarkType(a,b){asyncRequestByGet(BASE_PATH+"/type/mMark?p="+JSON.stringify(b),function(b){var c=checkResponseDataFormat(b);if(c){var d=JSON.parse(b);d.code==RESPONSE_SUCCESS?((new Toast).show("更新成功"),requestTypeListData(a)):(new Toast).show("更新失败")}},onRequestError(),onRequestTimeout())}function requestUpdateSummary(a){asyncRequestByGet(BASE_PATH+"/type/mSummary?p="+JSON.stringify(a),function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);c.code==RESPONSE_SUCCESS?(new Toast).show("更新成功"):(new Toast).show("更新失败")}},onRequestError(),onRequestTimeout())}function requestUpdateDirections(a){asyncRequestByGet(BASE_PATH+"/type/mDirections?p="+JSON.stringify(a),function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);c.code==RESPONSE_SUCCESS?(new Toast).show("更新成功"):(new Toast).show("更新失败")}},onRequestError(),onRequestTimeout())}function CircleProgress(a){this.progress=document.getElementById(a),this.context=this.progress.getContext("2d"),this.centerX=this.progress.width/2,this.centerY=this.progress.height/2,this.radius=Math.min(this.progress.width,this.progress.height)/3,this.context.translate(this.centerX,this.centerY)}function getArcLocation(a,b){var c=a*Math.cos(b),d=a*Math.sin(b);return new Array(c,d)}function showLoadingView(){var a=document.createElement("div");a.id="mask",a.style.position="absolute",a.style.top=getScrollTop()+"px",a.style.backgroundColor="#CCCCCC",a.style.width="100%",a.style.height="100%",a.style.left="0px",a.style.zIndex="10",a.style.opacity="0.6",document.body.appendChild(a);var b=document.createElement("canvas");b.id="canvas",b.style.position="absolute",b.style.top=getScrollTop()+100+"px",b.style.backgroundColor="#00FF0000",b.style.left=document.body.clientWidth/2-200+"px",b.style.width="400px",b.style.height="200px",b.style.zIndex="10",b.style.opacity="0.9",document.body.appendChild(b),document.documentElement.style.overflow="hidden";var c=new CircleProgress("canvas");c.rotate(30),document.oncontextmenu=new Function("event.returnValue=false;"),document.onselectstart=new Function("event.returnValue=false;"),window.onhelp=new Function("event.returnValue=false;"),document.onkeydown=function(){window.event&&13==window.event.keyCode&&(window.event.returnValue=!1)}}function dismissLoadingView(){document.onkeydown=null,document.documentElement.style.overflow="scroll",clearInterval(CircleProgress.prototype.task),document.oncontextmenu=new Function("event.returnValue=true;"),document.onselectstart=new Function("event.returnValue=true;"),document.body.removeChild(document.getElementById("mask")),document.body.removeChild(document.getElementById("canvas")),document.body.removeChild(document.getElementById("button"))}function getScrollTop(){var a;return window.pageYOffset?a=window.pageYOffset:document.compatMode&&"BackCompat"!=document.compatMode?a=document.documentElement.scrollTop:document.body&&(a=document.body.scrollTop),a}function recommend(){var a=BASE_PATH+"/format/mWeights";asyncRequestByGet(a,function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);c.code==RESPONSE_SUCCESS?initRecommendView(c.data):(new Toast).show("更新失败")}},onRequestError(),onRequestTimeout())}function swapRecommend(a){var b=BASE_PATH+"/format/mSwapWeight?p="+JSON.stringify(a);asyncRequestByGet(b,function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);c.code==RESPONSE_SUCCESS?(new Toast).show("更新成功"):(new Toast).show("更新失败")}},onRequestError(),onRequestTimeout())}function updateRecommend(a,b){var c=BASE_PATH+"/product/updateWeight?formatId="+a+"&weight="+b;asyncRequestByGet(c,function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);200==c.code?(new Toast).show("更新成功"):(new Toast).show("更新失败")}onConvertDataCallback(a)},onRequestError(),onRequestTimeout())}function initRecommendView(a){resetView();var b=document.getElementById(MAIN_TITLE_ID),c=document.getElementById(MAIN_CONTENT_ID),d=document.createElement("div");d.innerHTML="推荐管理",d.className="horizontalSelected",d.style.width="100%",b.appendChild(d);for(var e=void 0==a?0:a.length,f=function(b){var d=a[b],e=document.createElement("div");e.className="SS_IC",e.style.height="40px",e.style.width="100%";var f=document.createElement("div");f.className="SS_IC",f.style.height="32px",f.style.width="100%",f.style.borderWidth="0px";var g=document.createElement("hr");g.className="SS_IC_HL",f.appendChild(g);var h=document.createElement("div");h.className="SS_IC_LABEL",h.style.borderLeftWidth="1px",h.innerHTML=d.parent.parent.label,f.appendChild(h);var i=document.createElement("hr");i.className="SS_IC_HL",f.appendChild(i);var j=document.createElement("div");j.className="SS_IC_LABEL",j.style.borderLeftWidth="1px",j.innerHTML=d.parent.label,f.appendChild(j);var k=document.createElement("hr");k.className="SS_IC_HL",f.appendChild(k);var l=document.createElement("div");if(l.className="SS_IC_LABEL",l.style.borderLeftWidth="1px",l.style.width="70%",l.innerHTML=d.label+" "+d.meta,f.appendChild(l),b>8){h.style.cursor="default",j.style.cursor="default",l.style.cursor="default";var m=document.createElement("hr");m.className="SS_IC_HL",f.appendChild(m);var n=document.createElement("div");n.className="SS_IC_LABEL",n.style.borderLeftWidth="1px",n.style.width="50px",n.innerHTML="↓↑ ",n.formatId=d.formatId,n.weight=d.weight,n.onclick=function(){updateRecommend(d.formatId,0)},f.appendChild(n)}else f.id=d.formatId,f.weight=d.weight,f.draggable="true",f.style.cursor="move",f.addEventListener("dragstart",onDragStart),f.addEventListener("dragover",onDragOver),f.addEventListener("drop",onDrop),f.addEventListener("dragend",onDragEnd),h.style.cursor="move",j.style.cursor="move",l.style.cursor="move";e.appendChild(f),c.appendChild(e)},g=0;g<e;g++)f(g)}function onDragStart(a){a.dataTransfer.setData("formatId",a.target.id),a.dataTransfer.setData("weight",a.target.weight)}function onDragOver(a){a.preventDefault()}function onDrop(a){a.preventDefault();var b=a.dataTransfer.getData("formatId"),c=a.dataTransfer.getData("weight"),d=""==a.target.id||void 0==a.target.id?a.target.parentNode.id:a.target.id,e=""==a.target.weight||void 0==a.target.weight?a.target.parentNode.weight:a.target.weight,f=document.getElementById(d),g=document.getElementById(b),h=f.innerHTML;
f.innerHTML=g.innerHTML,g.innerHTML=h,a.dataTransfer.setData("sourceFormatId",b),a.dataTransfer.setData("sourceWeight",c),a.dataTransfer.setData("targetFormatId",d),a.dataTransfer.setData("targetWeight",e);var i=new Object;i.formatId1=b,i.weight1=c,i.formatId2=d,i.weight2=e,swapRecommend(i)}function onDragEnd(a){a.dataTransfer.getData("sourceFormatId"),a.dataTransfer.getData("sourceWeight"),a.dataTransfer.getData("targetFormatId"),a.dataTransfer.getData("targetWeight");a.dataTransfer.clearData()}function initSkinView(){resetView();var a=document.getElementById(MAIN_TITLE_ID),b=document.getElementById(MAIN_CONTENT_ID),c=document.createElement("div");c.innerHTML="皮肤设置",c.className="horizontalSelected",c.style.width="100%",a.appendChild(c);var d=new Array;d.push("简单 洁净 明亮"),d.push("传统 稳重 古典"),d.push("轻快 时尚 进步"),d.push("沉稳 肃穆 安静");for(var e=0;e<d.length;e++)b.appendChild(createItemWidget(d[e]))}function createItemWidget(a){var b=document.createElement("div");b.className="SS_IC",b.style.borderWidth="1px",b.style.width="100%",b.style.height="300px",b.style.marginBottom="20px";var c=document.createElement("div");c.className="SS_IC",c.style.width="133px",c.style.height="100%",c.style.lineHeight="300px",c.style.textAlign="center",c.style.borderWidth="0px",c.innerHTML=a;var d=document.createElement("div");d.className="SS_IC",d.style.width="310px",d.style.height="100%";var e=document.createElement("div");e.className="SS_IC",e.style.width="310px",e.style.height="100%";var f=document.createElement("div");return f.className="SS_IC",f.style.width="310px",f.style.height="100%",b.appendChild(c),b.appendChild(d),b.appendChild(e),b.appendChild(f),b}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function TabItem(a,b,c,d,e,f,g,h,i,j,k){this.id=a,this.displayName=b,this.method=c,this.normalClassName=d,this.selectedClassName=e,this.currentClassName=f,this.verticalNormalArrowClassName=g,this.verticalSelectedArrowClassName=h,this.verticalCurrentArrowClassName=i,this.width=j,this.height=k}function addExclusiveId(a){null!==a&&void 0!==a&&""!==a&&exclusiveIds.indexOf(a)<0&&exclusiveIds.push(a)}function initHorizontalTabHostView(a,b,c,d,e){var f=parseInt(a.clientWidth),g=parseInt(a.clientHeight),h=b.length,i=(f-3*(h-1))/h;null!=c&&(i=c);for(var j=0;j<h;j++){var k=b[j];k.width=i,k.height=g,createTabItem(a,k,!1,e)}d&&addExclusiveId(a.id)}function initVerticalTabHostView(a,b,c){for(var d=parseInt(a.clientWidth),e=parseInt(a.clientHeight),f=b.length,g=e/f,h=0;h<f;h++){var i=b[h];i.width=d,i.height=g,createTabItem(a,i,!0)}c&&addExclusiveId(a.id)}function createTabItem(a,b,c,d){var e=document.createElement("div");if(e.innerHTML=b.displayName,e.style.width=b.width+"px",e.className=b.currentClassName,e.normalClassName=b.normalClassName,e.selectedClassName=b.selectedClassName,e.method=b.method,e.dataId=b.id,void 0==d||e.method!=APP_CONST_ADD_NEW&&e.id!=APP_CONST_ADD_NEW?e.addEventListener("click",onTabItemClick):e.addEventListener("click",d),c){var f=document.createElement("div");f.className=b.verticalCurrentArrowClassName,f.normalClassName=b.verticalNormalArrowClassName,f.selectedClassName=b.verticalSelectedArrowClassName,e.appendChild(f)}a.appendChild(e)}function resetTabHost(a){for(var b=a.childElementCount,c=0;c<b;c++)a.childNodes[c].className=a.childNodes[c].normalClassName,a.childNodes[c].childNodes.length>1&&(a.childNodes[c].childNodes[1].className=a.childNodes[c].childNodes[1].normalClassName,a.childNodes[1].className=a.childNodes[1].normalClassName)}function onTabItemClick(){for(var a=this.parentNode.childElementCount,b=0;b<a;b++)this.parentNode.childNodes[b].className=this.normalClassName,this.childNodes.length>1&&(this.parentNode.childNodes[b].childNodes[1].className=this.parentNode.childNodes[b].childNodes[1].normalClassName,this.childNodes[1].className=this.childNodes[1].normalClassName);if(this.className=this.selectedClassName,this.childNodes.length>1&&(this.childNodes[1].className=this.childNodes[1].selectedClassName),exclusiveIds.indexOf(this.parentNode.id)>=0)for(var b=0;b<exclusiveIds.length;b++)this.parentNode.id!==exclusiveIds[b]&&resetTabHost(document.getElementById(exclusiveIds[b]));onFrameMenuItemClick(this.method),new Toast(TOAST_CONTAINER_ID,null,null,200,30).show(this.childNodes[0].data)}function Toast(a,b,c,d,e,f){void 0!=a&&""!=a&&null!=a||(a="body"),0!=d&&void 0!=d&&""!=d&&null!=d||(d=200),0!=e&&void 0!=e&&""!=e&&null!=e||(e=30),this.view=document.getElementById(a),this.startX=b,this.startY=c,this.width=d,this.height=e,this.className=f,this.opacity=1,this.step=.01,this.duration=10}function dismiss(){document.body.removeChild(document.getElementById("toastView"))}function isNull(a){return null===a||void 0===a||""===a}function showUsers(){var a=BASE_PATH+"/account/mRetrieve";asyncRequestByGet(a,function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);c.code==RESPONSE_SUCCESS?initUserList(c.data):(new Toast).show("请求失败")}},onRequestError(),onRequestTimeout())}function initUserList(a){resetView();var b=document.getElementById(MAIN_TITLE_ID),c=document.getElementById(MAIN_CONTENT_ID),d=document.createElement("div");d.innerHTML="用户列表",d.className="horizontalSelected",d.style.width="100%",b.appendChild(d);var e=createSearchWidget("100%",function(a){console.log(a)});c.appendChild(e);var f=createUserGridView(a);f.style.marginTop="5px",c.appendChild(f)}function createUserGridView(a){for(var b=document.createElement("div"),c=void 0==a?0:a.length,d=0;d<c;d++){var e=document.createElement("div");e.className="gridItemContainer";var f=createUserContentContainer(a[d]);if(e.appendChild(f),b.appendChild(e),d%4==0){var g=document.createElement("div");g.className="clearFloat",b.appendChild(e)}}return b}function createUserContentContainer(a){var b=document.createElement("div");b.className="gridItemSubContainer";var c=document.createElement("div");c.className="actionButton gridItemActionButton",0==a.status?(c.innerHTML="启用",b.style.borderColor="red"):1==a.status&&(c.innerHTML="禁用"),c.onclick=function(){var b=new Object;b.userId=a.userId,0==a.status?b.status=1:1==a.status&&(b.status=0),requestUpdateStatus(b)},b.appendChild(c);var d=document.createElement("div");d.className="actionButton gridItemActionButton",d.innerHTML="详情",d.onclick=function(){showUserDetail(a)},b.appendChild(d);var e=document.createElement("div");e.className="actionButton accountStatusNormal",e.innerHTML="食坊账号未绑定",b.appendChild(e);var f=document.createElement("div");f.className="actionButton accountStatusNormal",f.innerHTML="微信账号未绑定",b.appendChild(f);var g=document.createElement("div");g.className="actionButton accountStatusNormal",g.innerHTML="QQ账号未绑定",b.appendChild(g);for(var h=a.children,i=0;i<h.length;i++)0==a.children[i].source?(e.className="actionButton accountStatusActive",e.innerHTML="食坊账号已绑定"):1==a.children[i].source?(f.className="actionButton accountStatusActive",f.innerHTML="微信账号已绑定"):2==a.children[i].source&&(g.className="actionButton accountStatusActive",g.innerHTML="微信账号已绑定");return b}function requestUpdateStatus(a){var b=BASE_PATH+"/account/mMark?p="+JSON.stringify(a);asyncRequestByGet(b,function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);c.code==RESPONSE_SUCCESS?showUsers():(new Toast).show("请求失败")}},onRequestError(),onRequestTimeout())}function onCartTabCallback(a){var b=BASE_PATH+"/cart/mRetrieveByUser?p="+JSON.stringify(a);asyncRequestByGet(b,function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);createCartView(c.data)}},onErrorCallback,onTimeoutCallback),createOrderView(),createCartView()}function onOrderTabCallback(a){var b=BASE_PATH+"/order/mRetrieveByUser?p="+JSON.stringify(a);asyncRequestByGet(b,function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);createOrderView(c.data)}},onErrorCallback,onTimeoutCallback),createOrderView()}function onAccountTabCallback(a){createAccountView()}function onRequestReceiverCallback(a){var b=BASE_PATH+"/receiver/mRetrieveByUser?p="+JSON.stringify(a);asyncRequestByGet(b,function(a){var b=checkResponseDataFormat(a);if(b){var c=JSON.parse(a);createReceiverContainer(c.data)}},onErrorCallback,onTimeoutCallback)}function showUserDetail(a){resetView();var b=document.getElementById(MAIN_TITLE_ID),c=document.createElement("div");c.innerHTML="返回列表",c.className="horizontalNormal",c.style["float"]="left",c.style.width="82px",c.onclick=function(){showUsers()},b.appendChild(c);var d=document.createElement("div");d.style["float"]="left",d.style.width="1004px",d.style.height="40px",d.style.backgroundColor="red";var e=new Array;e.push(new Tab("cart","购物车","horizontalSelected",onCartTabCallback)),e.push(new Tab("order","订单","horizontalNormal",onOrderTabCallback)),e.push(new Tab("account","账户","horizontalNormal",onAccountTabCallback)),e.push(new Tab("receiver","收货地址","horizontalNormal",onRequestReceiverCallback)),b.appendChild(d);var f=new Object;f.userId=a.userId,createUserTitleTab(d,e,f),onCartTabCallback(f)}function createUserTitleTab(a,b,c){a.innerHTML=null;for(var d=function(d){var e=b[d],f=document.createElement("div");f.className=e.className,f.style.width="249px",f.style.height="100%",f.innerHTML=e.label,f.onclick=function(){for(var d=0;d<b.length;d++)b[d].className="horizontalNormal";e.className="horizontalSelected",createUserTitleTab(a,b,c),e.onTabClick(c)},a.appendChild(f)},e=0;e<b.length;e++)d(e)}function createOrderView(a){var b=document.getElementById(MAIN_CONTENT_ID);b.innerHTML=null;for(var c=void 0==a?0:a.length,d=0;d<c;d++){var e=a[d],f=document.createElement("div");f.className="SS_IC",f.style.width="1065px",f.style.height="150px",f.style.borderWidth="1px",d>0&&(f.style.borderTopWidth="0px");var g=document.createElement("div");g.className="SS_IC",g.style.width="1055px",g.style.height="40px",g.style.borderWidth="0px",g.style.borderBottomWidth="1px",g.style.backgroundColor="#F2F2F2",g.style.lineHeight="40px",g.style.paddingLeft="10px",g.innerHTML=new Date(e.createTime).format("yyyy-MM-dd hh:mm")+"  订单号: "+e.orderId,f.appendChild(g);var h=document.createElement("div");h.className="SS_IC",h.style.width="1066px",h.style.height="110px",h.style.borderWidth="0px";var i=document.createElement("div");i.className="SS_IC",i.style.width="550px",i.style.height="100%",i.style.borderWidth="0px";for(var j=e.formatEntities,k=void 0==j?0:j.length,l=0;l<k;l++){var m=j[l],n=document.createElement("div");n.className="SS_IC",n.style.width="550px",n.style.height="30px",n.style.borderWidth="0px",0!=l&&(n.style.borderTopWidth="1px");var o=document.createElement("div");o.className="SS_IC",o.style.width="490px",o.style.height="30px",o.style.marginLeft="10px",o.style.borderWidth="0px",o.style.lineHeight="30px",o.innerHTML=m.parent.parent.label+" "+m.parent.label+" "+m.label+m.meta,n.appendChild(o);var p=document.createElement("div");p.className="SS_IC",p.style.width="50px",p.style.height="30px",p.style.borderWidth="0px",p.style.lineHeight="30px",p.innerHTML="x 5",n.appendChild(p),i.appendChild(n)}h.style.height=31*k+"px",f.style.height=40+31*k+"px",h.appendChild(i);var q=document.createElement("div");q.className="SS_IC",q.style.width="213px",q.style.height="100%",q.style.textAlign="center",q.innerHTML="收货人",h.appendChild(q);var r=document.createElement("div");r.className="SS_IC",r.style.width="150px",r.style.height="100%",r.style.textAlign="center",r.innerHTML="总额:8888",h.appendChild(r);var s=document.createElement("div");s.className="SS_IC",s.style.width="150px",s.style.height="100%",s.style.textAlign="center",1==e.status?s.innerHTML="已付款,待发货":2==e.status?s.innerHTML="已发货,待收货":3==e.status?s.innerHTML="已收货,已完成":s.innerHTML="未知状态",h.appendChild(s),f.appendChild(h),b.appendChild(f)}}function createCartView(a){var b=document.getElementById(MAIN_CONTENT_ID);b.innerHTML=null;for(var c=void 0==a?0:a.length,d=0;d<c;d++){var e=a[d],f=document.createElement("div");f.className="SS_IC",f.style.width="1065px",f.style.height="30px",f.style.borderWidth="1px",d>0&&(f.style.borderTopWidth="0px");var g=document.createElement("div");g.className="SS_IC",g.style.width="150px",g.style.height="100%",g.style.borderWidth="0px",g.style.textAlign="center",g.innerHTML="2016-08-08 12:34",f.appendChild(g);var h=document.createElement("div");h.className="SS_IC",h.style.width="600px",h.style.height="100%",h.style.paddingLeft="10px",h.innerHTML=" "+e.formatEntity.parent.parent.label+" "+e.formatEntity.parent.label+" "+e.formatEntity.label+e.formatEntity.meta,f.appendChild(h);var i=document.createElement("div");i.className="SS_IC",i.style.width="100px",i.style.height="100%",i.style.textAlign="center",i.innerHTML=e.formatEntity.pricing+e.formatEntity.priceMeta,f.appendChild(i);var j=document.createElement("div");j.className="SS_IC",j.style.width="100px",j.style.height="100%",j.style.textAlign="center",j.innerHTML="数量:"+e.amount,f.appendChild(j);var k=document.createElement("div");k.className="SS_IC",k.style.width="100px",k.style.height="100%",k.style.textAlign="center",k.innerHTML=e.amount*e.formatEntity.pricing+e.formatEntity.priceMeta,f.appendChild(k),b.appendChild(f)}}function createAccountView(){var a=document.getElementById(MAIN_CONTENT_ID);a.innerHTML=null,a.appendChild(createPhoneAccountContainer()),a.appendChild(createAuthAccountContainer(0,"微信账号","","http://localhost:8080/foodslab/webapp/asserts/images/login_wx.png")),a.appendChild(createAuthAccountContainer(1,"QQ账号",void 0,"http://localhost:8080/foodslab/webapp/asserts/images/login_qq.png"))}function createPhoneAccountContainer(a){var b=document.createElement("div");b.className="accountItemContainer";var c=document.createElement("div");c.className="accountItem",c.innerHTML="电话账号",c.style.height="40px",c.style.lineHeight="40px",c.style.textAlign="center",b.appendChild(c);var d=document.createElement("div");d.className="accountItem";var e=document.createElement("div");e.className="labelLeft",e.innerHTML="账号:",d.appendChild(e);var f=document.createElement("div");f.className="labelRight",f.style.borderWidth="0px",f.innerHTML="暂无",d.appendChild(f),b.appendChild(d);var g=document.createElement("div");g.className="accountItem";var h=document.createElement("div");h.className="labelLeft",h.innerHTML="昵称:",g.appendChild(h);var i=document.createElement("div");i.className="labelRight",i.style.borderWidth="0px",i.innerHTML="暂无",g.appendChild(i),b.appendChild(g);var j=document.createElement("div");j.className="accountItem";var k=document.createElement("div");k.className="labelLeft",k.innerHTML="性别:",j.appendChild(k);var l=document.createElement("div");l.className="labelRight",l.innerHTML="暂无",l.style.borderWidth="0px",j.appendChild(l),b.appendChild(j);var m=document.createElement("div");m.className="accountItem",m.style.height="120px";var n=document.createElement("div");n.className="labelLeft",n.innerHTML="头像:",m.appendChild(n);var o=document.createElement("img");o.className="headerImage",m.appendChild(o),b.appendChild(m);var p=document.createElement("div");p.className="accountItem";var q=document.createElement("div");q.className="labelLeft",q.innerHTML="地址:",p.appendChild(q);var r=document.createElement("div");return r.className="labelRight",r.innerHTML="暂无",r.style.borderWidth="0px",p.appendChild(r),b.appendChild(p),b}function createAuthAccountContainer(a,b,c,d){var e=document.createElement("div");e.className="accountItemContainer",0==a&&(e.style.marginLeft="5px",e.style.marginRight="5px");var f=document.createElement("div");if(f.className="accountItem",f.style.height="40px",f.style.lineHeight="40px",f.style.textAlign="center",e.appendChild(f),void 0==c){f.innerHTML="扫码绑定"+b;var g=document.createElement("img");g.className="scanner",g.src=d,e.appendChild(g)}else{f.innerHTML=b;var h=document.createElement("div");h.className="accountItem";var i=document.createElement("div");i.className="labelLeft",i.innerHTML="昵称:",h.appendChild(i);var j=document.createElement("div");j.className="labelRight",j.innerHTML="微信绑定账号",j.style.borderWidth="0px",h.appendChild(j),e.appendChild(h);var k=document.createElement("div");k.className="accountItem";var l=document.createElement("div");l.className="labelLeft",l.innerHTML="性别:",k.appendChild(l);var m=document.createElement("div");m.className="labelRight",m.innerHTML="男",m.style.borderWidth="0px",k.appendChild(m),e.appendChild(k);var n=document.createElement("div");n.className="accountItem",n.style.height="120px";var o=document.createElement("div");o.className="labelLeft",o.innerHTML="头像:",n.appendChild(o);var p=document.createElement("img");p.className="headerImage",p.src="http://localhost:8080/foodslab/webapp/asserts/images/paywei.png",n.appendChild(p),e.appendChild(n);var q=document.createElement("div");q.className="accountItem";var r=document.createElement("div");r.className="labelLeft",r.innerHTML="地址:",q.appendChild(r);var s=document.createElement("div");s.className="labelRight",s.style.borderWidth="0px",s.innerHTML="北京市 昌平区",q.appendChild(s),e.appendChild(q)}return e}function createReceiverContainer(a){console.log(a);var b=document.getElementById(MAIN_CONTENT_ID);b.innerHTML=null;for(var c=void 0==a?0:a.length,d=0;d<c;d++){var e=a[d],f=document.createElement("div");f.className="receiverItemContainer";var g=document.createElement("hr");g.className="connectLineH",f.appendChild(g);var h=document.createElement("div");h.className="receiverLabel",h.style.width="151px",h.innerHTML=e.name,f.appendChild(h);var i=document.createElement("hr");i.className="connectLineH",f.appendChild(i);var j=document.createElement("div");j.className="receiverLabel",j.style.width="780px",j.style.textAlign="left",j.style.paddingLeft="10px",j.style.paddingRight="10px",j.innerHTML=e.province+" "+e.city+" "+e.county+" "+e.town+" "+e.village+" "+(void 0==e.append?"":e.append)+" "+e.phone0,2==e.status&&(h.style.borderColor="red",j.style.borderColor="red",j.style.width="784px"),f.appendChild(j),b.appendChild(f)}}var BASE_PATH="http://localhost:8080/foodslab",MAIN_TITLE_ID="main_title",MAIN_CONTENT_ID="main_content_container",TOAST_CONTAINER_ID="body",RESPONSE_SUCCESS=3050,APP_CONST_MENU=new Array,APP_CONST_CLIENT_ID="clientId",APP_CONST_ADD_NEW="addNew";Date.prototype.format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a};var menuUrl=BASE_PATH+"/menus",UNITS=void 0,EXPRESS=["顺丰快递","圆通快递","中通快递","邮政快递"],_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ManagerEntity=function(){function a(b,c,d,e,f,g,h){_classCallCheck(this,a),this.managerId=b,this.username=c,this.level=d,this.queue=e,this.status=f,this.pId=g,this.managerMenuEntitiesMapping=h,this.isUsernameU=!1,this.password="",this.isPasswordU=!1,this.isStatusU=!1}return _createClass(a,[{key:"setUsernameUpdate",value:function(a){this.isUsernameU=a}},{key:"setPassword",value:function(a){this.password=a}},{key:"setPasswordUpdate",value:function(a){this.isPasswordU=a}},{key:"setPasswordUpdate",value:function(a){this.isStatusU=isStatusU}},{key:"toString",value:function(){return"("+this.managerId+", "+this.username+")"}}]),a}(),ManagerMenuEntity=function(){function a(b,c,d){_classCallCheck(this,a),this.managerId=b,this.menuId=c,this.menuLabel=d}return _createClass(a,[{key:"toString",value:function(){return"("+this.managerId+", "+this.username+")"}}]),a}(),ORDER_TABS=new Array("未发货","已发货","已完成","全部"),FormatBaseViewInfo=function a(b,c,d,e,f,g){_classCallCheck(this,a),this.title=b,this.labelId=c,this.label=d,this.unitId=e,this.unitLabel=f,this.isSelector=g},HyperEditorTool=function b(a,c,d,e){_classCallCheck(this,b),this.label=a,this.invoke=c,this.param=d,this.viewType=e};CircleProgress.prototype.drawCircleProgress=function(){this.context.clearRect(0-this.centerX,0-this.centerY,2*this.centerX,2*this.centerY);for(var a=15,b=0,c=a,d=0;d<15;d++){var e=Math.acos((2*Math.pow(this.radius,2)-Math.pow(a+c,2)-5)/(2*Math.pow(this.radius,2)))*(180/Math.PI),f=getArcLocation(this.radius,-(e+b)*Math.PI/180);this.context.fillStyle="#FFFFFF",this.context.beginPath(),this.context.arc(f[0],f[1],c,0*Math.PI,2*Math.PI,!0),this.context.closePath(),this.context.fill(),a=c,c--,b+=e}},CircleProgress.prototype.rotate=function(a){this.drawCircleProgress();var b=this;CircleProgress.prototype.task=setInterval(function(){b.context.rotate(10*Math.PI/180),b.drawCircleProgress()},a)};var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Tab=function(){function a(b,c,d,e){_classCallCheck(this,a),this.id=b,this.label=c,this.className=d,this.callback=e}return _createClass(a,[{key:"onTabClick",value:function(a){this.callback(a)}}]),a}(),exclusiveIds=new Array;Toast.prototype.show=function(a){var b=this.view.offsetLeft+this.view.clientWidth/4,c=this.view.offsetTop,d=this.view.clientWidth/2,e=this.view.clientHeight/2,f=document.createElement("div");f.id="toastView",f.style.styleFloat="left",f.style.position="fixed",f.style.zIndex="10",isNull(this.startX)||(b=this.startX),isNull(this.startY)||(c=this.startY),isNull(this.width)||(d=this.width,isNull(this.startX)&&(b=this.view.clientWidth/2-d/2)),isNull(this.height)||(e=this.height),isNull(this.className)?(f.style.left=b+"px",f.style.top=c+"px",f.style.width=d+"px",f.style.height=e+"px",f.style.lineHeight=e+"px",f.style.textAlign="center",f.style.color="#FFFFFF",f.style.backgroundColor="#CCCCCC",f.style.opacity=this.opacity,f.style.borderRight="1px solid #999999",f.style.borderBottom="1px solid #999999",f.style.borderLeft="1px solid #999999",f.style.borderBottomRightRadius="5px",f.style.borderBottomLeftRadius="5px"):f.className=this.className,isNull(a)?f.innerHTML="you can set message here":f.innerHTML=a,document.body.appendChild(f);var g=this.opacity,h=this.step,i=setTimeout(function(){var a=setInterval(function(){g<0?(clearInterval(a),dismiss()):f.style.opacity=g,g-=h},this.duration);clearTimeout(i)},1e3)};